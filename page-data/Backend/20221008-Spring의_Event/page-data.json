{"componentChunkName":"component---src-templates-blog-post-js","path":"/Backend/20221008-Spring의_Event/","result":{"data":{"site":{"siteMetadata":{"author":"momo","comment":{"utterances":"2022-momo/2022-momo.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"excerpt":"해당 포스트는 모모팀 크루 렉스가 작성하였습니다. 학습 계기 프로젝트를 진행하며 도메인간의 연관관계를 분리하는 작업을 진행하다보니 Spring의 Event방식에 대해 알게 되었다. 이번 포스트에서는 프로젝트에 Event를 사용하기 위해 학습한 내용에 대해 포스팅해보려 한다. 진행하였던 프로젝트의 연관관계 분리 작업에 대해 자세히 알고 싶다면 아래의 포스트…","html":"<blockquote>\n<p>해당 포스트는 모모팀 크루 <a href=\"https://github.com/Seongwon97\">렉스</a>가 작성하였습니다.</p>\n</blockquote>\n<h1 id=\"학습-계기\" style=\"position:relative;\"><a href=\"#%ED%95%99%EC%8A%B5-%EA%B3%84%EA%B8%B0\" aria-label=\"학습 계기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>학습 계기</h1>\n<p>프로젝트를 진행하며 도메인간의 연관관계를 분리하는 작업을 진행하다보니 Spring의 Event방식에 대해 알게 되었다. 이번 포스트에서는 프로젝트에 Event를 사용하기 위해 학습한 내용에 대해 포스팅해보려 한다.</p>\n<blockquote>\n<p>진행하였던 프로젝트의 연관관계 분리 작업에 대해 자세히 알고 싶다면 아래의 포스트를 보길 바란다.</p>\n<ul>\n<li><a href=\"https://seongwon.dev/Spring/20221009-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B01/\">모모팀 서비스 성능 개선기1 (의존관계 개선)</a></li>\n</ul>\n</blockquote>\n<h1 id=\"event란\" style=\"position:relative;\"><a href=\"#event%EB%9E%80\" aria-label=\"event란 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event란?</h1>\n<blockquote>\n<p>컴퓨팅에서 <strong>이벤트</strong>(event)란 프로그램에 의해 감지되고 처리될 수 있는 동작이나 사건을 말한다.</p>\n<ul>\n<li><a href=\"https://ko.wikipedia.org/wiki/%EC%9D%B4%EB%B2%A4%ED%8A%B8_(%EC%BB%B4%ED%93%A8%ED%8C%85)\">이벤트 (컴퓨팅) - 위키백과, 우리 모두의 백과사전</a></li>\n</ul>\n</blockquote>\n<p>위키피디아에서 Event를 위와 같이 정의하고 있다. Spring에서는 이러한 Event 메커니즘을 기본적으로 갖고 있으며 사용자가 쉽게 사용할 수 있도록 제공하고 있다. Spring의 핵심인 <code>ApplicationContext</code>를 살펴만봐도 <code>BeanFactory</code>외에 <code>ApplicationEventPublisher</code>인터페이스도 <code>extends</code>하는 것을 확인할 수 있다. 이와 같이 Event 처리 방식은 Spring Framework Core에 있을 정도로 기본적으로 제공하는 중요한 부분이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 889px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 6.333333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQ0lEQVQI1x2JSwqAUAzEvI/YaQXtz+f9bzUWFyGQbHrsPA1cXYws+pC9mOMKp0dOb9bz/r/mXXcQUApAqA5GNaMI+AEWNyBy/JKfoQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/34faf6d53722df8f1f0399b98aee96da/83e77/img.png\"\n        srcset=\"/static/34faf6d53722df8f1f0399b98aee96da/5a46d/img.png 300w,\n/static/34faf6d53722df8f1f0399b98aee96da/0a47e/img.png 600w,\n/static/34faf6d53722df8f1f0399b98aee96da/83e77/img.png 889w\"\n        sizes=\"(max-width: 889px) 100vw, 889px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiElEQVQI112OWRLDMAhDcx4vSe16B5L7n0o1bpuPfGiGeQikzTkHay1iCuBTEGOEMWayL18yFq9wYBCh9Y7/jXK/e9RWQcR4p4St9goWmc9OlJYxhCDXhVwzGrXF2+govaxZvbobMkCscwIJT8kK3DRJE2/5n7SFszjCjs56zAizvbKn7/bPXx804V+AmfeFfQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/e70feeeb6944535e3dd797770785bb1a/c1b63/img_1.png\"\n        srcset=\"/static/e70feeeb6944535e3dd797770785bb1a/5a46d/img_1.png 300w,\n/static/e70feeeb6944535e3dd797770785bb1a/0a47e/img_1.png 600w,\n/static/e70feeeb6944535e3dd797770785bb1a/c1b63/img_1.png 1200w,\n/static/e70feeeb6944535e3dd797770785bb1a/8d68c/img_1.png 1234w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h2 id=\"event의-용도-및-장점\" style=\"position:relative;\"><a href=\"#event%EC%9D%98-%EC%9A%A9%EB%8F%84-%EB%B0%8F-%EC%9E%A5%EC%A0%90\" aria-label=\"event의 용도 및 장점 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event의 용도 및 장점</h2>\n<p>이벤트는 크게 두 가지 용도로 사용되고 있다.</p>\n<p>첫번째 용도는 트리거 역할이다. 도메인의 상태가 바뀔 때, 이후의 작업을 실행하기 위한 용도로 사용할 수 있다. 필자가 Event방식을 학습하게 된 계기와 같이 모임이 삭제되었을 때 연관된 데이터를 삭제하게 하는 트리거 역할에 사용할 수 있다.</p>\n<p>두번째 용도는 서로 다른 시스템 간의 동기화 역할이다. A라는 시스템에서 변동이 있었을 때, B라는 서비스에 이벤트를 통해 정보 동기화를 진행할 수 있다. 예를 들자면 11번가에서 CJ대한통운을 통해 배송하는 택배를 주문하였고 해당 배송 주소를 변경하게 된다면 11번가에서는 주문 정보에 배송 주소를 변경시키고 CJ 대한통운에 배송 주소가 변경되었다는 것을 알리기 위해 변경 이벤트를 발생시키며 배송 주소를 동기화할 수 있다.</p>\n<p>이러한 이벤트를 잘만 이용하면 각각의 시스템, 도메인 간의 연관관계(의존성)을 제거할 수 있고 의존관계의 제거로 인해 기능 확장 및 축소를 쉽게 진행할 수 있다.</p>\n<h1 id=\"event-사용-방법\" style=\"position:relative;\"><a href=\"#event-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\" aria-label=\"event 사용 방법 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event 사용 방법</h1>\n<p>이벤트의 동작은 크게 설명하자면 publisher를 통해 Event를 발생시키고 Listener가 해당 이벤트를 받아서 처리하는 방법으로 진행이 된다. 지금부터 Event객체, Publisher, Listenr에 대해 하나씩 살펴보겠다.</p>\n<h2 id=\"event-객체\" style=\"position:relative;\"><a href=\"#event-%EA%B0%9D%EC%B2%B4\" aria-label=\"event 객체 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event 객체</h2>\n<p>Spring은 <code>ApplicationEvent</code>라는 추상 클래스를 제공하고 있다. Event는 해당 클래스를 <code>extends</code>하는 작업만으로도 쉽게 만들 수 있다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">package</span><span class=\"mtk4\"> </span><span class=\"mtk9\">org.springframework.context</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.time.Clock</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">import</span><span class=\"mtk4\"> </span><span class=\"mtk11\">java.util.EventObject</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">abstract</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ApplicationEvent</span><span class=\"mtk4\"> </span><span class=\"mtk9\">extends</span><span class=\"mtk4\"> </span><span class=\"mtk11\">EventObject</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">static</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk9\">long</span><span class=\"mtk4\"> serialVersionUID </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">7099057708183571937L</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk9\">long</span><span class=\"mtk4\"> timestamp</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> ApplicationEvent</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Object</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">source</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">super</span><span class=\"mtk1\">(source);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">timestamp</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">System</span><span class=\"mtk1\">.</span><span class=\"mtk3\">currentTimeMillis</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> ApplicationEvent</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Object</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">source</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Clock</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">clock</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">super</span><span class=\"mtk1\">(source);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">timestamp</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">clock</span><span class=\"mtk1\">.</span><span class=\"mtk3\">millis</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">final</span><span class=\"mtk3\"> </span><span class=\"mtk9\">long</span><span class=\"mtk3\"> getTimestamp</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">timestamp</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><code>ApplicationEvent</code>객체를 상속받고 생성자에서 필드를 통해 데이터를 할당시키고 <code>super()</code>를 통해 객체를 전달시키면 된다. 여기서 주입받는 Object객체는 일반적으로 <code>publishEvent(new GroupDeleteEvent(this, id));</code> 와 같이 publisher를 통해 event를 발생시키는 객체가 위치한다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Getter</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk4\"> </span><span class=\"mtk9\">extends</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ApplicationEvent</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Long</span><span class=\"mtk4\"> id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> GroupDeleteEvent</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Object</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">object</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">id</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">super</span><span class=\"mtk1\">(object);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">this</span><span class=\"mtk1\">.</span><span class=\"mtk4\">id</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> id;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p><strong>📌  Spring 4.2버전부터 변경된 내용</strong></p>\n<p>지금까지 살펴본 <code>ApplicationEvent</code>를 상속받는 방식은 스프링 구버전부터 정석적으로 사용하던 방식이다. 하지만 Spring 4.2버전 이후는 Event관련 기능이 개선되어 <code>ApplicationEvent</code>를 상속하지 않고 사용할 수 있게 되었다. 개발자는 단순히 일반 객체를 <code>publishEvent()</code> 메서드이 인자로 넣어주기만 하면 스프링이 해당 객체를 알아서 Event로 감싸주도록 개선되었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 784px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAoklEQVQI1z1O2Q6DIBD0/3+tiVcFrYAoRkTq1cOkb1PAxIfJzM7uzm5E9QtE76iVQSEGkGZA1U2gUoPwDgVrQbkCFQ6uzitx+Z4JOyH1DLMdiOTzC2k/uDcGKR+RO86EYz4gpSwExKRG4vQtL4POnJeWPIQmhAWOi0c4Gs3vH+x+hOWsZO5ae2k/oKYN7bgE+C86s0CZ1fkrenv2vPa93u74A0O12FcG/+IsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/fadf9d664e24370136d9aaa95fb658bb/4971b/img_2.png\"\n        srcset=\"/static/fadf9d664e24370136d9aaa95fb658bb/5a46d/img_2.png 300w,\n/static/fadf9d664e24370136d9aaa95fb658bb/0a47e/img_2.png 600w,\n/static/fadf9d664e24370136d9aaa95fb658bb/4971b/img_2.png 784w\"\n        sizes=\"(max-width: 784px) 100vw, 784px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>즉, 이제는 아래와 같이 Event에 필요한 데이터만을 담은 객체를 만들어 사용하여도 된다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Getter</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">Long</span><span class=\"mtk4\"> id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2 id=\"event-publisher\" style=\"position:relative;\"><a href=\"#event-publisher\" aria-label=\"event publisher permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event Publisher</h2>\n<p>Event를 생성하기 위해서는 <code>ApplicationEventPublisher</code> Bean을 주입받고 해당 객체에서 제공하는 <code>publishEvent()</code>메서드를 사용하면 된다. 아래의 코드는 이벤트를 발생시키는 예시 코드이다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span><span class=\"mtk4\">(</span><span class=\"mtk7\">readOnly</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk7\">true</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Service</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">GroupModifyService</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ApplicationEventPublisher</span><span class=\"mtk4\"> applicationEventPublisher</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> delete</span><span class=\"mtk1\">(</span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">hostId</span><span class=\"mtk1\">, </span><span class=\"mtk11\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">groupId</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// 1. ApplicationEvent를 상속한 Event클래스를 통해 이벤트를 발생시킬 경우</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">applicationEventPublisher</span><span class=\"mtk1\">.</span><span class=\"mtk3\">publishEvent</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">GroupDeleteEvent</span><span class=\"mtk1\">(</span><span class=\"mtk11\">this</span><span class=\"mtk1\">, id));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5 mtki\">// 2. ApplicationEvent를 상속하지 않은 Event클래스를 통해 이벤트를 발생시킬 경우</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">applicationEventPublisher</span><span class=\"mtk1\">.</span><span class=\"mtk3\">publishEvent</span><span class=\"mtk1\">(</span><span class=\"mtk9\">new</span><span class=\"mtk1\"> </span><span class=\"mtk3\">GroupDeleteEvent</span><span class=\"mtk1\">(groupId));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">groupRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">deleteById</span><span class=\"mtk1\">(groupId);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>코드에서 <code>publishEvent()</code>를 사용한 두 가지 코드를 작성하였다. 1번 방법의 경우 앞서 Event에서 살펴봤던 <code>ApplicationEvent</code>를 상속한 Event클래스를 이용해 이벤트를 발생시키는 예시를 나타낸 것이며 두번째는 Spring 4.2이후 버전에서 <code>ApplicationEvent</code>의 상속을 하지 않은 Event객체를 통해 이벤트를 발생시킨 예시 코드이다.</p>\n<h2 id=\"eventlistener\" style=\"position:relative;\"><a href=\"#eventlistener\" aria-label=\"eventlistener permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EventListener</h2>\n<p><code>EventListener</code>는 Publisher에서 발행항 Event를 받아 처리하는 부분이다, <code>EventListener</code>는 <code>ApplicationListener</code>를 구현하는 클래스를 빈으로 등록하고 이벤트를 받았을 때 처리해야할 작업들은 <code>onApplicationEvent()</code> 메서드에 작성하면 된다. <code>ApplicationListener</code>는 제너릭 타입으로 처리할 Event를 지정할 수 있는데 해당 Event객체는 반드시 <code>ApplicationEvent</code>를 상속받은 Event객체어야 한다. 즉, Spring 4.2 버전 이후의 <code>ApplicationEvent</code>를 상속받지 않은 Event객체는 해당 방법을 사용할 수 없다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteDeleteEventListener</span><span class=\"mtk4\"> </span><span class=\"mtk9\">implements</span><span class=\"mtk4\"> </span><span class=\"mtk11\">ApplicationListener</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk1\">&gt;</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteRepository</span><span class=\"mtk4\"> favoriteRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Override</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> onApplicationEvent</span><span class=\"mtk1\">(</span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">event</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">deleteAllByGroupId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">event</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Spring 4.2 이후 버전에서 <code>ApplicationEvent</code> 를 상속받지 않은 이벤트 객체들은 어노테이션 기반의 EventListener를 만들면 된다. 스프링에서 어노테이션 기반의 EventListener가 제공되며 <code>@EventListener</code>를 메서드 위에 붙이는 것 만으로도 EventListener를 만들 수 있다. 사용 예시는 아래와 같다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Component</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">public</span><span class=\"mtk4\"> </span><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteDeleteEventListener</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">private</span><span class=\"mtk4\"> </span><span class=\"mtk9\">final</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteRepository</span><span class=\"mtk4\"> favoriteRepository</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">EventListener</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> deleteGroup</span><span class=\"mtk1\">(</span><span class=\"mtk11\">GroupDeleteEvent</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">event</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">deleteAllByGroupId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">event</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">EventListener</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">public</span><span class=\"mtk3\"> </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> deleteMember</span><span class=\"mtk1\">(</span><span class=\"mtk11\">MemberDeleteEvent</span><span class=\"mtk1\"> </span><span class=\"mtk4 mtki\">event</span><span class=\"mtk1\">)</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">deleteAllByMemberId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">event</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>어노테이션 기반 EventListener은 위의 코드에서 알 수 있듯이 한 개의 클래스에서 여러개의 EventListener를 만들 수 있다는 이점이 있다. 기존의 방식은 한 개의 클래스에서 하나의 이벤트만을 처리할 수 있다는 단점이 있었는데 이러한 단점이 개선되었다.</p>\n<h2 id=\"테스트-진행해보기\" style=\"position:relative;\"><a href=\"#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A7%84%ED%96%89%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"테스트 진행해보기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>테스트 진행해보기</h2>\n<p>해당 이벤트 처리 방식이 잘 실행되는지 테스트 해보기 위해 테스트 코드를 작성해봤다. 테스트 초기 데이터는 momo, dudu라는 유저가 studyGroup을 찜한 상태이며, Event의 처리가 올바르게 된다면 studyGroup을 삭제했을 때 이벤트가 발생하여 관련된 favorite데이터들이 없어질 것이다.</p>\n<blockquote>\n<p>자세한 코드는 <a href=\"https://github.com/woowacourse-teams/2022-momo\">모모팀 레포지토리</a>에서 확인하실 수 있다.</p>\n</blockquote>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">Transactional</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk4\">(</span><span class=\"mtk7\">autowireMode</span><span class=\"mtk4\"> </span><span class=\"mtk8\">=</span><span class=\"mtk4\"> </span><span class=\"mtk11\">TestConstructor</span><span class=\"mtk1\">.</span><span class=\"mtk11\">AutowireMode</span><span class=\"mtk1\">.</span><span class=\"mtk4\">ALL)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk11\">SpringBootTest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9\">class</span><span class=\"mtk4\"> </span><span class=\"mtk11\">FavoriteDeleteEventListenerTest</span><span class=\"mtk4\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">DisplayName</span><span class=\"mtk4\">(</span><span class=\"mtk6\">&quot;모임 삭제시 관련된 찜 데이터를 삭제한다&quot;</span><span class=\"mtk4\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">@</span><span class=\"mtk11\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk9\">void</span><span class=\"mtk3\"> deleteRelatedGroupData</span><span class=\"mtk1\">()</span><span class=\"mtk3\"> </span><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">groupModifyService</span><span class=\"mtk1\">.</span><span class=\"mtk3\">delete</span><span class=\"mtk1\">(</span><span class=\"mtk11\">momo</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">studyGroup</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">synchronize</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Optional</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Favorite</span><span class=\"mtk1\">&gt; </span><span class=\"mtk4\">actual1</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findByGroupIdAndMemberId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">studyGroup</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">momo</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk11\">Optional</span><span class=\"mtk1\">&lt;</span><span class=\"mtk11\">Favorite</span><span class=\"mtk1\">&gt; </span><span class=\"mtk4\">actual2</span><span class=\"mtk1\"> </span><span class=\"mtk8\">=</span><span class=\"mtk1\"> </span><span class=\"mtk11\">favoriteRepository</span><span class=\"mtk1\">.</span><span class=\"mtk3\">findByGroupIdAndMemberId</span><span class=\"mtk1\">(</span><span class=\"mtk11\">studyGroup</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">(), </span><span class=\"mtk11\">dudu</span><span class=\"mtk1\">.</span><span class=\"mtk3\">getId</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">assertAll</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                () </span><span class=\"mtk9\">-&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">assertThat</span><span class=\"mtk1\">(actual1).</span><span class=\"mtk3\">isEmpty</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                () </span><span class=\"mtk9\">-&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk3\">assertThat</span><span class=\"mtk1\">(actual2).</span><span class=\"mtk3\">isEmpty</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    </span><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>테스트를 실행해본 결과 아래와 같이 이벤트가 처리되어 favorite데이터들 삭제 쿼리가 실행되고 테스트도 통과한 것을 확인할 수 있다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"java\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">Hibernate</span><span class=\"mtk9\">:</span><span class=\"mtk4\"> </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    delete </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    from</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        momo_favorite </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    where</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        group_id</span><span class=\"mtk8\">=</span><span class=\"mtk9\">?</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">Hibernate</span><span class=\"mtk9\">:</span><span class=\"mtk4\"> </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    delete </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    from</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        momo_group </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    where</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        id</span><span class=\"mtk8\">=</span><span class=\"mtk9\">?</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 571px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 10.999999999999998%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAb0lEQVQI13WLywrCMBQF+yUat65sJRuV5N6baKFg8FGFbvz/vxhT6EpwMQwc5jSajaEMjK83t/uDlM+oZTQtWOJ4CkTR/0TBajd/G9cKzgd8X5DrRCwTl+cHXSzVPhU2nbBuI+6Xuq92ge2hZ2+FL1tfRc6vx5usAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/99ab485f2371352b8f6fa61d5edf1f01/17d73/img_3.png\"\n        srcset=\"/static/99ab485f2371352b8f6fa61d5edf1f01/5a46d/img_3.png 300w,\n/static/99ab485f2371352b8f6fa61d5edf1f01/17d73/img_3.png 571w\"\n        sizes=\"(max-width: 571px) 100vw, 571px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<h1 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h1>\n<p>이번 포스트에서는 Spring에서 제공하는 Event를 사용하는 기본적인 방법에 대해 살펴보았다. 이벤트는 이번 포스트에서 다룬 내용 외에도 많은 기능들을 제공한다. 이번 포스팅에서 다룬 내용대로 이벤트를 사용한다면 기본적으로 동기식 이벤트로 동작할 것이다. 하지만 스프링은 어노테이션을 통해 비동기 이벤트와 트랜잭션 단계에 따라 이벤트를 동작시키는 Transaction-Bound Event 기능을 제공하고 있다. 해당 내용은 추후에 학습을 한 후 포스팅을 진행해보겠다.</p>\n<h1 id=\"-reference\" style=\"position:relative;\"><a href=\"#-reference\" aria-label=\" reference permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📚 Reference</h1>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#context-functionality-events\">Core Technologies</a></li>\n<li><a href=\"https://www.baeldung.com/spring-events\">Spring Events</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationEventPublisher.html#publishEvent-java.lang.Object-\">ApplicationEventPublisher (Spring Framework 5.3.23 API)</a></li>\n<li><a href=\"https://sabarada.tistory.com/184\">[Spring] Spring의 Event를 어떻게 사용하는지에 대해서 알아봅시다</a></li>\n<li><a href=\"https://blog.naver.com/gngh0101/222020512119\">호식이 : 네이버 블로그</a></li>\n<li><a href=\"https://velog.io/@backtony/Spring-Event-Driven\">Spring - Event Driven</a></li>\n<li><a href=\"https://velog.io/@znftm97/%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EA%B8%B0%EB%B0%98-%EC%84%9C%EB%B9%84%EC%8A%A4%EA%B0%84-%EA%B0%95%EA%B2%B0%ED%95%A9-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0-ApplicationEventPublisher\">이벤트 기반, 서비스간 강결합 문제 해결하기 - ApplicationEventPublisher</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtki { font-style: italic; }\n  .one-dark-pro .mtk9 { color: #C678DD; }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk11 { color: #E5C07B; }\n  .one-dark-pro .mtk8 { color: #56B6C2; }\n  .one-dark-pro .mtk7 { color: #D19A66; }\n  .one-dark-pro .mtk3 { color: #61AFEF; }\n  .one-dark-pro .mtk5 { color: #7F848E; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#%ED%95%99%EC%8A%B5-%EA%B3%84%EA%B8%B0\">학습 계기</a></li>\n<li>\n<p><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#event%EB%9E%80\">Event란?</a></p>\n<ul>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#event%EC%9D%98-%EC%9A%A9%EB%8F%84-%EB%B0%8F-%EC%9E%A5%EC%A0%90\">Event의 용도 및 장점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#event-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\">Event 사용 방법</a></p>\n<ul>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#event-%EA%B0%9D%EC%B2%B4\">Event 객체</a></li>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#event-publisher\">Event Publisher</a></li>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#eventlistener\">EventListener</a></li>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A7%84%ED%96%89%ED%95%B4%EB%B3%B4%EA%B8%B0\">테스트 진행해보기</a></li>\n</ul>\n</li>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n<li><a href=\"/Backend/20221008-Spring%EC%9D%98_Event/#-reference\">📚 Reference</a></li>\n</ul>","frontmatter":{"date":"2022년 10월 08일","title":"Spring의 Event란 무엇일까?","tags":["SpringFramework","Event"]}}},"pageContext":{"slug":"/Backend/20221008-Spring의_Event/","previous":{"fields":{"slug":"/Backend/20220930-FetchJoin과-limit을-같이-사용하며-발생한-문제/"},"frontmatter":{"title":"Fetch Join과 limit을 같이 사용하며 발생한 문제 - [WARN] firstResult/maxResults specified with collection fetch; applying in memory!"}},"next":{"fields":{"slug":"/Backend/20221009-모모팀-서비스성능-개선기1/"},"frontmatter":{"title":"모모팀 서비스 성능 개선기1 (의존관계 개선)"}}}},"staticQueryHashes":["3911196313","4111100897"]}