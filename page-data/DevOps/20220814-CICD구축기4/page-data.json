{"componentChunkName":"component---src-templates-blog-post-js","path":"/DevOps/20220814-CICD구축기4/","result":{"data":{"site":{"siteMetadata":{"author":"momo","comment":{"utterances":"2022-momo/2022-momo.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"excerpt":"해당 포스트는 모모팀 크루 렉스가 작성하였습니다. 이전까지의 과정으로는 DB를 Spring의 인메모리 H2 DB를 사용하여 CI/CD과정이 진행될 때마다 DB데이터들이 초기화되었다. 이번 포스팅에서는 DB를 영구적으로 보관하기 위해 MySQL DB를 구축 및 연결하는 과정을 다뤄보려 한다. 1. DB서버 생성 및 MySQL 설치 DB서버는 앞선 과정에서 …","html":"<blockquote>\n<p>해당 포스트는 모모팀 크루 <a href=\"https://github.com/Seongwon97\">렉스</a>가 작성하였습니다.</p>\n</blockquote>\n<p>이전까지의 과정으로는 DB를 Spring의 인메모리 H2 DB를 사용하여 CI/CD과정이 진행될 때마다 DB데이터들이 초기화되었다. 이번 포스팅에서는 DB를 영구적으로 보관하기 위해 MySQL DB를 구축 및 연결하는 과정을 다뤄보려 한다.</p>\n<h1 id=\"1-db서버-생성-및-mysql-설치\" style=\"position:relative;\"><a href=\"#1-db%EC%84%9C%EB%B2%84-%EC%83%9D%EC%84%B1-%EB%B0%8F-mysql-%EC%84%A4%EC%B9%98\" aria-label=\"1 db서버 생성 및 mysql 설치 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. DB서버 생성 및 MySQL 설치</h1>\n<p>DB서버는 앞선 과정에서 만들었던 EC2와는 다르게 외부와의 접근을 열어둘 필요가 없기에 Public IP할당 없이 EC2를 생성하면 보안적으로 이점을 얻을 수 있다. Private IP만을 갖고있는 EC2를 생성한 후, 아래의 게시글을 따라 MySQL을 설치해보겠다.</p>\n<blockquote>\n<p>MySQL설치 내용만으로도 내용이 방대하여 포스트를 분리하였다.</p>\n<ul>\n<li><a href=\"https://seongwon.dev/DevOps/20220813-MySQL%EC%84%A4%EC%B9%98_%EC%9B%90%EA%B2%A9%EC%A0%91%EC%86%8D%EC%84%A4%EC%A0%95/\">[AWS] Private Ec2에 MySQL설치 및 원격 접속 설정하기</a></li>\n</ul>\n</blockquote>\n<h1 id=\"2-서브모듈을-통한-db-정보-관리\" style=\"position:relative;\"><a href=\"#2-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88%EC%9D%84-%ED%86%B5%ED%95%9C-db-%EC%A0%95%EB%B3%B4-%EA%B4%80%EB%A6%AC\" aria-label=\"2 서브모듈을 통한 db 정보 관리 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 서브모듈을 통한 DB 정보 관리</h1>\n<p>이제 앞서 만든 DB서버를 우리가 만든 Spring 프로젝트에 연결하여야 한다. 이때 DB정보는 외부에 노출되면 안되기에 다른 프로젝트 파일들과 함께 올려서는 안 되기에 DB정보 연결에 대해서는 생각을 좀 해봐야 한다.</p>\n<p>지금 생각나는 DB 정보를 외부에 노출 없이 적용하는 방법은 아래와 같다.</p>\n<ol>\n<li>배포서버에 DB정보를 환경 변수로 설정하여 연결하는 방법</li>\n<li>스크립트를 통해 빌드 이전에 프로젝트 설정 파일을 업데이트하는 방법</li>\n<li>서브모듈을 통해 관리하는 방법</li>\n</ol>\n<p>하지만 각각의 방법을 생각해봤을 때, 첫번째 방법은 각각의 실행 서버에 DB정보를 환경변수로 설정해줘야하기에 배포 서버가 1개가 아닌 여러개가 존재한다면 여러개의 서버에 직접 접근하여 설정을 해줘야 할 것이다. 또한 DB정보가 업데이트될 경우 다시 여러개의 서버에 직접 접근하여 각각 업데이트를 해줘야 하는 불편함이 발생할 것이다.</p>\n<p>두번째 방법은 빌드 이전에 프로젝트 설정 파일을 한 번만 업데이트 해주면 되기에 앞서 있던 문제는 해결할 수 있으나, 해당 방법 또한 DB의 변경점이 있을 경우 빌드를 담당하는 Jenkins 서버에 직접 접근하여 스크립트를 수정하는 번거로움이 발생할 것이다. 그래서 최종적으로 서브모듈을 도입하게 되었다. 서브모듈을 도입함으로써 해당 문제를 해결하였다.</p>\n<blockquote>\n<p><a href=\"https://seongwon.dev/Git/20220811-Git%20Submodule%EC%9D%B4%EB%9E%80/\">Git Submodule</a>에 대한 자세한 사용법은 내용은 다음 포스트를 참고하길 바란다.</p>\n</blockquote>\n<p>위의 포스트를 참조하여 DB와 JWT토큰 값과 같이 외부에 노출되면 안되는 정보를 담기 위한 Private 레포를 만들어 아래와 같은 DB 서버의 MySQL정보를 추가하고 Submodule을 연동했다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"yaml\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">spring</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">datasource</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">driver-class-name</span><span class=\"mtk1\">: </span><span class=\"mtk6\">com.mysql.cj.jdbc.Driver</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">username</span><span class=\"mtk1\">: {</span><span class=\"mtk6\">userName</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">password</span><span class=\"mtk1\">: {</span><span class=\"mtk6\">password</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">url</span><span class=\"mtk1\">: </span><span class=\"mtk6\">jdbc:mysql://xxx.xxx.xxx.xxx:3306/momo?serverTimezone=UTC&amp;characterEncoding=UTF-8</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">jpa</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">hibernate.ddl-auto</span><span class=\"mtk1\">: </span><span class=\"mtk6\">validate</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">database-platform</span><span class=\"mtk1\">: </span><span class=\"mtk6\">org.hibernate.dialect.MySQL8Dialect</span></span></span></code></pre>\n<h1 id=\"3-jenkins-파이프라인에-submodule-설정하기\" style=\"position:relative;\"><a href=\"#3-jenkins-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8%EC%97%90-submodule-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"3 jenkins 파이프라인에 submodule 설정하기 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Jenkins 파이프라인에 Submodule 설정하기</h1>\n<p>Private 레포를 만들어 Submodule을 연동했다면 Jenkins에서도 해당 서브모듈에 접근을 하기 위한 권한을 주기 위해 Github Token을 추가해줘야 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 29.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVQY06WR627CMAyF8/5PyECaBoVqhdE2bZM617PYaJnUH0iISJ/s2OckcqIulxb7/QFaT+CVc8Y7SxmzYpoM+l5jXQnOhRI9iALmmeuj5H811ltLJRKGQdcew161LAbMOGrohWApIsaEEJIIiFzJY8X7UNn22Ke67objuUXbXdH+WPRzQPBeBCllgYUppRr/2fZyGbmMdd99wJ4aOcSRx3fXyzM8xnF1pOc40at5KObPL6zNST6EbzGUEWKW/Suw9xfk0tTuk/l4sgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/4450bc7ea70a3b0241110e718ad42064/c1b63/img.png\"\n        srcset=\"/static/4450bc7ea70a3b0241110e718ad42064/5a46d/img.png 300w,\n/static/4450bc7ea70a3b0241110e718ad42064/0a47e/img.png 600w,\n/static/4450bc7ea70a3b0241110e718ad42064/c1b63/img.png 1200w,\n/static/4450bc7ea70a3b0241110e718ad42064/d61c2/img.png 1800w,\n/static/4450bc7ea70a3b0241110e718ad42064/e8950/img.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>📌 add credentials</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAjklEQVQY062QTwvCMAzF+/2/kxfPXjx5quAQdKxtmg7XP6t9bi0Ub14M/Mh7SQgkQsorcs74VwgiByaLNa2VGBvz/AIRV53SeyP/JIQEYa3D7enwUAtGE2A41KYxjGG4QylTmSbddfN7pu61tm2h5gXHC+NwHnGSDjG18/c3xBi3oVDx3le+fcuh10op+ACBCjZBe8e5OQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/75121e75db5d812a73c9c15f65b70565/c1b63/img_1.png\"\n        srcset=\"/static/75121e75db5d812a73c9c15f65b70565/5a46d/img_1.png 300w,\n/static/75121e75db5d812a73c9c15f65b70565/0a47e/img_1.png 600w,\n/static/75121e75db5d812a73c9c15f65b70565/c1b63/img_1.png 1200w,\n/static/75121e75db5d812a73c9c15f65b70565/d61c2/img_1.png 1800w,\n/static/75121e75db5d812a73c9c15f65b70565/e8950/img_1.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>📌 submodule에 접근 가능한 Github 유저의 Github Token을 Password에 입력하며 Credential을 추가한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6ElEQVQoz6WTO27DMBBEefTcIY1vEPgCOUYqNwbSpXAlSvzoxyW5mV3JLg2IIvCwLLTDWQ1pYow8zwsvy0YphUutqMep6DMhRPbes3MOwrMK5pyPgZ6UkvYa2YiY1KxiZatHQZ+4NImIh8GpqPdBq3Ne97Sfroe8Y59KTKnDrrMQHfYPcjs6sjiEq74fuIfojGDEGVEbRlxN07SP7FlSR1zcusyKka21mnDV61JOAUFiQcd8QidG5oogKL1+7GmHv38P/rnd2SJp23U8jiMva8KrWZswn9dv/rh8cUAoEaGEEJqQMAk35h8fyqwh0qdF2wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/9c11dd4cebb6aaec1fc8a32218778c80/c1b63/img_2.png\"\n        srcset=\"/static/9c11dd4cebb6aaec1fc8a32218778c80/5a46d/img_2.png 300w,\n/static/9c11dd4cebb6aaec1fc8a32218778c80/0a47e/img_2.png 600w,\n/static/9c11dd4cebb6aaec1fc8a32218778c80/c1b63/img_2.png 1200w,\n/static/9c11dd4cebb6aaec1fc8a32218778c80/d61c2/img_2.png 1800w,\n/static/9c11dd4cebb6aaec1fc8a32218778c80/e8950/img_2.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Token을 추가함으로써 이제 Jenkins에서도 프로젝트에 연결된 서브모듈에 접근할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAo0lEQVQY03VP2Q7DIAzr//9k36GEIxzl9ICp0jZpllASO47wIYTAeZ5QSmFhjIFffHL/+gdHjBHeBxApsHNYs5QCzDx5v+viQgj7xZigiWCt/eLfWsTh5hGaC2Q8QsroreHSHjkXlFKgtUatFW3yq/be4HwC+3v3j/boB7OfJoLhGyn3FQTkCmob2yDltY8aY+bcd6xwNyiboTnPT9TtWfGX/gJKKzevT8nH0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/d3555c59a1c2981a1204005ae6d1e78a/c1b63/img_3.png\"\n        srcset=\"/static/d3555c59a1c2981a1204005ae6d1e78a/5a46d/img_3.png 300w,\n/static/d3555c59a1c2981a1204005ae6d1e78a/0a47e/img_3.png 600w,\n/static/d3555c59a1c2981a1204005ae6d1e78a/c1b63/img_3.png 1200w,\n/static/d3555c59a1c2981a1204005ae6d1e78a/d61c2/img_3.png 1800w,\n/static/d3555c59a1c2981a1204005ae6d1e78a/e8950/img_3.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>마지막으로 Pipeline에서 git에서 최신화 파일을 clone할 때, 앞서 추가한 credential로 submodule파일을 가져오는 코드를 추가하면 DB연결 과정이 끝나게 된다.</p>\n<p>Git Clone Stage에 서브모듈을 가져오는 코드를 추가한 스크립트는 아래와 같다.</p>\n<pre class=\"grvsc-container one-dark-pro\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pipeline {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    agent any</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    stages {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        stage(</span><span class=\"mtk6\">&#39;Git Clone&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            steps {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                git branch: </span><span class=\"mtk6\">&#39;develop-be&#39;</span><span class=\"mtk1\">, url: </span><span class=\"mtk6\">&#39;https://github.com/woowacourse-teams/2022-momo.git&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                withCredentials([GitUsernamePassword(credentialsId: </span><span class=\"mtk6\">&#39;submodule_security_token&#39;</span><span class=\"mtk1\">, gitToolName: </span><span class=\"mtk6\">&#39;Default&#39;</span><span class=\"mtk1\">)]) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    sh </span><span class=\"mtk6\">&#39;git submodule update --init --recursive&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h1 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"toc-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h1>\n<p>지금까지 Jenkins를 통한 CI/CD 구축1~4 과정들을 통해 Jenkins를 통해 백엔드, 프론트엔드의 배포 자동화를 구축하였다. 처음 인프라를 구축해본만큼 많은 학습과 시행착오를 겪으며 완성한 현재의 프로젝트의 인프라 구조는 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVQoz3WRW2/aQBBG/d+rvvexD32KkHr5A1WFkkpFqAmhIJVSDJhAIL5hY3t9wV4bc7q20iiN1JFGs/bsfjrzjXY+n3FdF9M02e9dnL1HGTlU5k9OgJSyzbIseR514kER8zK0qqpwHOefn+JujN19i2/tOKYJRVG0opvNBmO5IC5q/K/vEJMv+LkkECFBHJFmKZpt23Q6HYQQ6LMZC31Gcizwg5j3r18x+THk+uYGXddbwcFgwOXVJa7lMvXWfNC7fF5f83FxhScCtOHtLRcXF/yeTlvS++2WVFHJ/Ii+NJjP5/T7fQzDoFJjNxOJOKZQdw41dGNFXlTYVU2SKkLP85gpsjAMn0ZWtiLrptZYtkWv12M8HpFl2dOdQgkEecUqzvGyHF9l09eee3eu67ZWaUTSfaOcPxEcBPaDw2g4bmn/RjL4RGn027Ms1NJkQ1+iNVuulVBTm2wiFRH25Bvbg44jdpjRHUHmKitScmVFnB4xf30ntFYItZTQs9j7e9V/SfgomOcKv6x5CFfY0T27wMAM1ohItBv3fZ9IiUZHycjYcFgNKdwl4n+CDbFUD6vyxEl5da5oz/WjJa0takGlLNoqVa8sK/Ut+QNft6d+nk3tKAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"Untitled\"\n        src=\"/static/8761581db38261f1835e6357459fdd6b/c1b63/img_4.png\"\n        srcset=\"/static/8761581db38261f1835e6357459fdd6b/5a46d/img_4.png 300w,\n/static/8761581db38261f1835e6357459fdd6b/0a47e/img_4.png 600w,\n/static/8761581db38261f1835e6357459fdd6b/c1b63/img_4.png 1200w,\n/static/8761581db38261f1835e6357459fdd6b/d61c2/img_4.png 1800w,\n/static/8761581db38261f1835e6357459fdd6b/e8950/img_4.png 2000w\"\n        sizes=\"(max-width: 1200px) 100vw, 1200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>인프라 구조는 HTTPS를 도입하고 Load Balancing을 위해 배포 서버를 여러개 생성하는 등의 작업을 하게 된다면 구조가 변경될 수 있다고 생각한다. 인프라도 우리가 작성하는 비즈니스 코드를 리펙터링 하는 것과 같이 지속적으로 더 나은 구조가 없는지 생각하고 찾아보며 유동적으로 구조를 변경해보고자 한다.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .one-dark-pro {\n    background-color: #282c34;\n    color: #abb2bf;\n  }\n  .one-dark-pro .mtk4 { color: #E06C75; }\n  .one-dark-pro .mtk1 { color: #ABB2BF; }\n  .one-dark-pro .mtk6 { color: #98C379; }\n  .one-dark-pro .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"/DevOps/20220814-CICD%EA%B5%AC%EC%B6%95%EA%B8%B04/#1-db%EC%84%9C%EB%B2%84-%EC%83%9D%EC%84%B1-%EB%B0%8F-mysql-%EC%84%A4%EC%B9%98\">1. DB서버 생성 및 MySQL 설치</a></li>\n<li><a href=\"/DevOps/20220814-CICD%EA%B5%AC%EC%B6%95%EA%B8%B04/#2-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88%EC%9D%84-%ED%86%B5%ED%95%9C-db-%EC%A0%95%EB%B3%B4-%EA%B4%80%EB%A6%AC\">2. 서브모듈을 통한 DB 정보 관리</a></li>\n<li><a href=\"/DevOps/20220814-CICD%EA%B5%AC%EC%B6%95%EA%B8%B04/#3-jenkins-%ED%8C%8C%EC%9D%B4%ED%94%84%EB%9D%BC%EC%9D%B8%EC%97%90-submodule-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">3. Jenkins 파이프라인에 Submodule 설정하기</a></li>\n<li><a href=\"/DevOps/20220814-CICD%EA%B5%AC%EC%B6%95%EA%B8%B04/#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n</ul>","frontmatter":{"date":"2022년 08월 14일","title":"Jenkins를 통한 CI/CD 구축기 4편 (Backend DB 구축)","tags":["DevOps","CI/CD","Jenkins","AWS","EC2","React","MySQL"]}}},"pageContext":{"slug":"/DevOps/20220814-CICD구축기4/","previous":{"fields":{"slug":"/Frontend/20220808-모달에-애니메이션-달기/"},"frontmatter":{"title":"모달에 애니메이션 달기"}},"next":{"fields":{"slug":"/Frontend/20220815-submodule로-환경변수-관리하기/"},"frontmatter":{"title":"submodule로 환경 변수 관리하기"}}}},"staticQueryHashes":["3911196313","4111100897"]}