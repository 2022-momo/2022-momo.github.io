<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0"/><style data-href="/styles.d53766664f3eaba3db40.css" id="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}</style><meta name="generator" content="Gatsby 2.32.13"/><style type="text/css">
    .toc-header.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .toc-header.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .toc-header svg,
    h2 .toc-header svg,
    h3 .toc-header svg,
    h4 .toc-header svg,
    h5 .toc-header svg,
    h6 .toc-header svg {
      visibility: hidden;
    }
    h1:hover .toc-header svg,
    h2:hover .toc-header svg,
    h3:hover .toc-header svg,
    h4:hover .toc-header svg,
    h5:hover .toc-header svg,
    h6:hover .toc-header svg,
    h1 .toc-header:focus svg,
    h2 .toc-header:focus svg,
    h3 .toc-header:focus svg,
    h4 .toc-header:focus svg,
    h5 .toc-header:focus svg,
    h6 .toc-header:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="icon" href="/favicon-32x32-1134414851454382d55f3e82eb460d40.png" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3F4145"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48-1134414851454382d55f3e82eb460d40.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72-1134414851454382d55f3e82eb460d40.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96-1134414851454382d55f3e82eb460d40.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144-1134414851454382d55f3e82eb460d40.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192-1134414851454382d55f3e82eb460d40.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256-1134414851454382d55f3e82eb460d40.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384-1134414851454382d55f3e82eb460d40.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512-1134414851454382d55f3e82eb460d40.png"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><title data-react-helmet="true">모모팀 서비스 성능 개선기2 (조회 쿼리 개선) | 모모의 기술 블로그</title><meta data-react-helmet="true" name="description" content="들어가며 지금까지는 서비스 개발을 진행하며 API를 호출하였을 때 실행되는 쿼리의 수, 성능상의 문제점 등을 생각하지 않고 일단 돌아가는 코드를 만들자! 하면서 기능 개발에만 몰두하였었다. 하지만 성능상의 문제를 생각하지 않고 개발을 진행하고 우리 서비스의 목표 인원(우테코 크루 + 코치, 약 150명)이 동시 접속을 하여 서비스를 이용한다는 상황으로 부…"/><meta data-react-helmet="true" property="og:title" content="모모팀 서비스 성능 개선기2 (조회 쿼리 개선)"/><meta data-react-helmet="true" property="og:image" content="/static/social-image-78ea8dbe9ea55ddf7384fb9b357c15ca.png"/><meta data-react-helmet="true" property="og:description" content="들어가며 지금까지는 서비스 개발을 진행하며 API를 호출하였을 때 실행되는 쿼리의 수, 성능상의 문제점 등을 생각하지 않고 일단 돌아가는 코드를 만들자! 하면서 기능 개발에만 몰두하였었다. 하지만 성능상의 문제를 생각하지 않고 개발을 진행하고 우리 서비스의 목표 인원(우테코 크루 + 코치, 약 150명)이 동시 접속을 하여 서비스를 이용한다는 상황으로 부…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:image" content="/static/social-image-78ea8dbe9ea55ddf7384fb9b357c15ca.png"/><meta data-react-helmet="true" name="twitter:creator" content="momo"/><meta data-react-helmet="true" name="twitter:title" content="모모팀 서비스 성능 개선기2 (조회 쿼리 개선)"/><meta data-react-helmet="true" name="twitter:description" content="들어가며 지금까지는 서비스 개발을 진행하며 API를 호출하였을 때 실행되는 쿼리의 수, 성능상의 문제점 등을 생각하지 않고 일단 돌아가는 코드를 만들자! 하면서 기능 개발에만 몰두하였었다. 하지만 성능상의 문제를 생각하지 않고 개발을 진행하고 우리 서비스의 목표 인원(우테코 크루 + 코치, 약 150명)이 동시 접속을 하여 서비스를 이용한다는 상황으로 부…"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-91d2ca5880d6e7d8e505.js"/><link as="script" rel="preload" href="/framework-eb684e3e828ad13b3940.js"/><link as="script" rel="preload" href="/styles-84a9bc99193fe5828ffe.js"/><link as="script" rel="preload" href="/dc6a8720040df98778fe970bf6c000a41750d3ae-17eb047fb821ccbad0b0.js"/><link as="script" rel="preload" href="/app-d1a6932a45bfd024ad29.js"/><link as="script" rel="preload" href="/d7eeaac4-dcbe97e7a5aa158c9d08.js"/><link as="script" rel="preload" href="/5e2a4920-da90abce4a08c86a094c.js"/><link as="script" rel="preload" href="/1bfc9850-409296e666dade882413.js"/><link as="script" rel="preload" href="/commons-b839ac3ef2817b5d267d.js"/><link as="script" rel="preload" href="/7a297f752dcfe258c0b0106d89edb3a916af916e-ba3bed115b500439fc94.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-4910a6c560d7a355cf37.js"/><link as="fetch" rel="preload" href="/page-data/Backend/20221014-모모팀-서비스성능-개선기2/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3911196313.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4111100897.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><noscript><style data-emotion-css="zp4s6h">.css-zp4s6h{position:fixed;bottom:0;left:0;margin-left:0.5rem;margin-bottom:0.5rem;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06);-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:0.25rem;--text-opacity:1;color:rgba(255,255,255,var(--text-opacity));font-size:0.875rem;font-weight:700;padding-left:1rem;padding-right:1rem;padding-top:0.75rem;padding-bottom:0.75rem;background-color:#A5CC82;z-index:9999;}</style><div class="css-zp4s6h"><style data-emotion-css="5x4yj0">.css-5x4yj0{fill:currentColor;width:1.5rem;height:1.5rem;margin-right:0.5rem;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 192 512" class="css-5x4yj0" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"></path></svg><style data-emotion-css="1f2k2gl">.css-1f2k2gl{margin-left:0.5rem;}</style><div class="css-1f2k2gl">Please enable JavaScript to use this site.<br/>JavaScript를 활성화 시켜주세요.</div></div></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="f6s0ma">.css-f6s0ma{-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);background-color:#FFFFFF;color:#333333;}</style><style data-emotion-css="acifd">.css-acifd{min-height:100vh;-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);background-color:#FFFFFF;color:#333333;}</style><div class="css-acifd e5jinln0"><style data-emotion-css="8ezs2g">.css-8ezs2g{min-height:calc(100vh - 100px);}</style><div class="css-8ezs2g"><style data-emotion-css="17vgyms">.css-17vgyms{background:linear-gradient( 90deg,#00467F,#A5CC82 );}</style><div class="css-17vgyms"><style data-emotion-css="1mqm4zt">.css-1mqm4zt{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;max-width:1280px;margin-left:auto;margin-right:auto;padding:1.25rem;}</style><nav class="css-1mqm4zt eocge8f0"><style data-emotion-css="1usmgm5">.css-1usmgm5{font-size:1.25rem;--text-opacity:1;color:rgba(255,255,255,var(--text-opacity));font-weight:700;}</style><a class="css-1usmgm5" href="/">모모팀의 기술 블로그</a><a aria-label="search page" href="/search"><style data-emotion-css="47445j">.css-47445j{--text-opacity:1;color:rgba(255,255,255,var(--text-opacity));margin-top:auto;margin-bottom:auto;width:2rem;height:2rem;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="css-47445j" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg></a></nav></div><style data-emotion-css="1d3ps91">.css-1d3ps91{background:linear-gradient( 90deg,#00467F,#A5CC82 );position:fixed;width:100%;box-shadow:0 1px 3px 0 rgba(0,0,0,0.1),0 1px 2px 0 rgba(0,0,0,0.06);z-index:100;-webkit-transition:all 300ms cubic-bezier(0,0,0.2,1);transition:all 300ms cubic-bezier(0,0,0.2,1);top:-100px;}</style><div class="css-1d3ps91"><nav class="css-1mqm4zt eocge8f0"><a class="css-1usmgm5" href="/">모모팀의 기술 블로그</a><a aria-label="search page" href="/search"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="css-47445j" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg></a></nav></div><style data-emotion-css="w27u98">.css-w27u98{margin-top:1rem;padding-left:1rem;padding-right:1rem;}</style><div class="blog-post-container css-w27u98"><div class="blog-post"><style data-emotion-css="1bdwg0l">.css-1bdwg0l{width:100%;max-width:768px;margin-left:auto;margin-right:auto;}</style><div class="css-1bdwg0l e6qprj20"><style data-emotion-css="1abxlfd">.css-1abxlfd{font-size:2.25rem;font-weight:700;margin-bottom:1rem;}@media (min-width:768px){.css-1abxlfd{font-size:3rem;}}</style><h1 class="blog-title css-1abxlfd">모모팀 서비스 성능 개선기2 (조회 쿼리 개선)</h1><style data-emotion-css="cpn9zx">.css-cpn9zx{font-size:1rem;margin-bottom:1rem;}</style><h2 class="blog-date css-cpn9zx">2022년 10월 14일</h2><style data-emotion-css="cet0rr">.css-cet0rr{margin-bottom:0.5rem;}</style><div class="blog-tags css-cet0rr"><style data-emotion-css="engchn">.css-engchn{white-space:nowrap;-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);font-size:1rem;font-weight:700;border-radius:9999px;margin-right:0.5rem;margin-top:0.25rem;margin-bottom:0.25rem;padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.75rem;padding-right:0.75rem;background-color:#edf2f7;color:#00467F;}</style><button class="css-engchn">SpringFramework</button><button class="css-engchn">성능 개선기</button><button class="css-engchn">조회 쿼리 개선</button><button class="css-engchn">fetch join</button><button class="css-engchn">DTO반환</button></div><style data-emotion-css="1l4w6pd">.css-1l4w6pd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}</style><div class="css-1l4w6pd"><style data-emotion-css="164tafw">.css-164tafw{border-radius:9999px;width:100%;height:1px;--bg-opacity:1;background-color:rgba(247,250,252,var(--bg-opacity));background:linear-gradient( 270deg,#00467F,#A5CC82,#FFC500 );}</style><div class="css-164tafw"></div></div></div><div class="blog-content"><style data-emotion-css="qwqmam">.css-qwqmam{-webkit-scrollbar-width:thin;-moz-scrollbar-width:thin;-ms-scrollbar-width:thin;scrollbar-width:thin;-webkit-scrollbar-color:gray transparent;-moz-scrollbar-color:gray transparent;-ms-scrollbar-color:gray transparent;scrollbar-color:gray transparent;display:none;}.css-qwqmam::-webkit-scrollbar{width:4px;}.css-qwqmam::-webkit-scrollbar-track{background-color:transparent;}.css-qwqmam::-webkit-scrollbar-thumb{border-radius:9999px;background-color:gray;}.css-qwqmam::-webkit-scrollbar-button{width:0;height:0;}@media screen and (min-width:1280px){.css-qwqmam{float:right;position:-webkit-sticky;position:sticky;top:100px;width:calc((100vw - 720px) / 2 - 80px);max-width:250px;margin-right:1rem;overflow:auto;word-break:break-word;max-height:calc(100vh - 200px);fontsize:1rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-left-width:4px;border-image:linear-gradient( 180deg,#00467F,#A5CC82,#FFC500 );border-image-slice:1;}}</style><div class="css-qwqmam"><style data-emotion-css="13af3fo">.css-13af3fo{margin-left:1rem;margin-right:1rem;}</style><div class="css-13af3fo"><style data-emotion-css="17i5xbf">.css-17i5xbf{font-weight:700;margin-bottom:0.5rem;font-size:1.125rem;--text-opacity:1;color:rgba(74,85,104,var(--text-opacity));}</style><h3 class="css-17i5xbf">TOC</h3><style data-emotion-css="1me4zjn">.css-1me4zjn ul{margin-left:0.5rem;}.css-1me4zjn ul > li a:hover{color:#555555;}.css-1me4zjn ul > li a{-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);--text-opacity:1;color:rgba(160,174,192,var(--text-opacity));font-size:0.875rem;}.css-1me4zjn ul > li a[href=""]{font-size:0.95rem;color:#555555;}</style><div class="css-1me4zjn"><ul>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0">들어가며</a></li>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EA%B0%9D%EC%B2%B4-%EB%B0%8F-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%98-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84">객체 및 테이블의 연관관계</a></li>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EA%B0%9C%EC%84%A0-%EC%A0%84-%EC%BF%BC%EB%A6%AC-%EB%B6%84%EC%84%9D">개선 전 쿼리 분석</a></li>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#fetchjoin%EC%9D%84-%ED%86%B5%ED%95%9C-%EB%8B%A8%EA%B1%B4-%EC%A1%B0%ED%9A%8C-%EC%BF%BC%EB%A6%AC-%EA%B0%9C%EC%84%A0">FetchJoin을 통한 단건 조회 쿼리 개선</a></li>
<li>
<p><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#dto%EB%A5%BC-%ED%86%B5%ED%95%9C-%EB%AA%A8%EC%9E%84-%EB%AA%A9%EB%A1%9D-%EC%A1%B0%ED%9A%8C">DTO를 통한 모임 목록 조회</a></p>
<ul>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%B8%A1%EB%A9%B4%EC%97%90%EC%84%9C%EC%9D%98-%EC%84%B1%EB%8A%A5-%EC%A0%80%ED%95%98">메모리 측면에서의 성능 저하</a></li>
<li>
<p><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#db-%EC%B8%A1%EB%A9%B4%EC%97%90%EC%84%9C%EC%9D%98-%EC%84%B1%EB%8A%A5-%EC%A0%80%ED%95%98">DB 측면에서의 성능 저하</a></p>
<ul>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EB%B6%88%ED%95%84%EC%9A%94%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9A%94%EC%B2%AD">불필요한 데이터 요청</a></li>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EB%B3%B4%EB%82%B4%EC%A7%80%EB%8A%94-%EC%BF%BC%EB%A6%AC%EC%9D%98-%EC%88%98">보내지는 쿼리의 수</a></li>
</ul>
</li>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0">문제 해결</a></li>
</ul>
</li>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EA%B0%9C%EC%84%A0-%EC%A0%84%ED%9B%84-%EC%8B%A4%ED%96%89%EB%90%98%EB%8A%94-%EC%BF%BC%EB%A6%AC-%EC%88%98-%EB%B9%84%EA%B5%90">개선 전/후 실행되는 쿼리 수 비교</a></li>
<li><a href="/Backend/20221014-%EB%AA%A8%EB%AA%A8%ED%8C%80-%EC%84%9C%EB%B9%84%EC%8A%A4%EC%84%B1%EB%8A%A5-%EA%B0%9C%EC%84%A0%EA%B8%B02/#%EB%A7%88%EC%B9%98%EB%A9%B0">마치며</a></li>
</ul></div></div></div><div class="css-1bdwg0l e6qprj20"><div><style data-emotion-css="14b4smw">.css-14b4smw{font-size:1rem;word-break:break-word;}.css-14b4smw h1 > a > svg,.css-14b4smw h2 > a > svg,.css-14b4smw h3 > a > svg,.css-14b4smw h4 > a > svg,.css-14b4smw h5 > a > svg,.css-14b4smw h6 > a > svg{fill:#000;}.css-14b4smw h1,.css-14b4smw h2{font-size:1.25rem;font-weight:600;margin-top:1.5rem;margin-bottom:1.5rem;}.css-14b4smw h3,.css-14b4smw h4,.css-14b4smw h5,.css-14b4smw h6{font-size:1.125rem;margin-top:1.5rem;margin-bottom:1.5rem;font-weight:600;}@media (min-width:640px){.css-14b4smw h1,.css-14b4smw h2{font-size:1.5rem;}.css-14b4smw h3,.css-14b4smw h4,.css-14b4smw h5,.css-14b4smw h6{font-size:1.25rem;}}.css-14b4smw a{color:#00467F;}.css-14b4smw a:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-14b4smw p{margin:0.3rem;margin-top:0.75rem;margin-bottom:0.75rem;}.css-14b4smw ul,.css-14b4smw ol{margin:0.3rem;margin-left:2rem;}.css-14b4smw li > p,.css-14b4smw li > ul,.css-14b4smw li > ol{margin-bottom:0;}.css-14b4smw ol{list-style-type:decimal;}.css-14b4smw ul{list-style-type:disc;}.css-14b4smw blockquote{padding:0.5rem;background-color:#eee;margin:0.3rem;margin-top:0.5rem;margin-bottom:0.5rem;border-left-width:4px;border-color:#A5CC82;}.css-14b4smw blockquote > p{margin:0.5rem;}.css-14b4smw blockquote > h1,.css-14b4smw blockquote > h2,.css-14b4smw blockquote > h3,.css-14b4smw blockquote > h4,.css-14b4smw blockquote > h5{margin-top:0.5rem;margin-bottom:0.5rem;}.css-14b4smw td,.css-14b4smw th{padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-width:1px;border-color:#A5CC82;}.css-14b4smw tr:nth-of-type(even){background-color:#eee;}.css-14b4smw th{background-color:#eee;}.css-14b4smw table{margin-bottom:1.5rem;display:block;max-width:-webkit-fit-content;max-width:-moz-fit-content;max-width:fit-content;margin:0 auto;overflow-x:auto;white-space:nowrap;}.css-14b4smw p > code,.css-14b4smw li > code{padding-top:0.1rem;padding-bottom:0.1rem;padding-right:0.25rem;padding-left:0.25rem;border-radius:0.25rem;color:#00467F;background-color:#eee;white-space:pre-line;}.css-14b4smw pre.grvsc-container{margin-top:24px;margin-bottom:24px;}.css-14b4smw hr{margin-top:24px;margin-bottom:24px;height:2px;border:none;background:linear-gradient( 270deg,#00467F,#A5CC82,#FFC500 );}</style><div class="markdown css-14b4smw"><h1 id="들어가며" style="position:relative;"><a href="#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0" aria-label="들어가며 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>들어가며</h1>
<p>지금까지는 서비스 개발을 진행하며 API를 호출하였을 때 실행되는 쿼리의 수, 성능상의 문제점 등을 생각하지 않고 일단 돌아가는 코드를 만들자! 하면서 기능 개발에만 몰두하였었다. 하지만 성능상의 문제를 생각하지 않고 개발을 진행하고 우리 서비스의 목표 인원(우테코 크루 + 코치, 약 150명)이 동시 접속을 하여 서비스를 이용한다는 상황으로 부하 테스트를 진행하였을 때 애플리케이션이 올라간 EC2가 버티지 못하는 문제가 발생하였다.</p>
<p><img src="https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cb9a1190-ac7c-4dc2-99b1-da4e630133a8/Untitled.png" alt="부하테스트 결과 Img"></p>
<p>실제로 부하를 준 후에 Grafana와 Prometheus를 통해 Spring 프로젝트를 모니터링 해본 결과 EC2가 종료되기 전에 많은 객체를 생성하여 메모리 사용량과 GC의 동작이 활발한 것을 확인할 수 있고 DB에 많은 조회요청이 있어 HikariCP의 DB 커넥션이 항상 높거나 부족한 것을 확인할 수 있었다.</p>
<p>이에 서비스의 API별 실행되는 쿼리의 개수를 파악하여 개선해야한다는 것을 느꼈고 가장 많은 요청이 있는 조회 쿼리에 대한 개선을 먼저 진행해보려고 한다.</p>
<h1 id="객체-및-테이블의-연관관계" style="position:relative;"><a href="#%EA%B0%9D%EC%B2%B4-%EB%B0%8F-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%9D%98-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84" aria-label="객체 및 테이블의 연관관계 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>객체 및 테이블의 연관관계</h1>
<p>조회 로직 개선을 하기 앞서 먼저 객체와 테이블들 사이의 연관관계를 살펴보겠다. 모두모여라 서비스는 모임 서비스인만큼 모임(Group)객체/테이블을 중심으로 다른 객체/테이블들이 연관관계를 맺고 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 56.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABYklEQVQoz32Sya6CQBBF+/9/RP6AhUuIw8adGCPGgajgzOAs1suppAkY8yrpNNRw69atNvLDPp+P3ufzWY7Ho9xuNz15nst2u5X3+93Iq5v5BcTNORwOCuJ5nnQ6HVmv13K5XCTLskbeT8BvMAw21+tVkiSR5XIpp9NJWeP7F7AOhjEe7F6vl4IBbAF3u52y/h7b3g2Gde0AxChcrVYymUyqnDiOK8BvLY1NsgcwWGBlWTaWY+35fCpzbk6dUGMpj8dDxuNxoyt6DYdDbVJnUhSFBEGggDSuRkYviu73e/U8rOg02O/3Eoah6pemqcYtILKwcfzEwTA4R6ORDAYDvWezmbIBDN3m87lsNhvVbbFYSBRF2tD+oy8+/lmeQR9+Wq2WOI6j3xTQaDqdSq/Xk263K+12W3zfVwAawqrf7+sbdV1XZaHGEIQ+iXTkSSA4ujAG4FYGHjXLIUYdPisXoxP7A3zgSzqglAFmAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Untitled"
        title="Untitled"
        src="/static/9d2e13f3727b2e5e26b7e70f12454fc4/c1b63/img.png"
        srcset="/static/9d2e13f3727b2e5e26b7e70f12454fc4/5a46d/img.png 300w,
/static/9d2e13f3727b2e5e26b7e70f12454fc4/0a47e/img.png 600w,
/static/9d2e13f3727b2e5e26b7e70f12454fc4/c1b63/img.png 1200w,
/static/9d2e13f3727b2e5e26b7e70f12454fc4/a8a6f/img.png 1516w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 82.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACb0lEQVQ4y3VUWWKqQBD0QC9RI4uKu6hRQVCIiGuWt9z/BPWqG8doYj7aAWempqq6hlK1WsXT0xNkNCXvlUoFvV4P8SpBEC4QRjEajYb+b9bLeP0sY+knwHK5jFkY4fj+F9EyxSJeodXu3ABel/x/AbwGMvX4+Ih5tEJ+eMUsWGCVrtHudPSga1a1Wk3Lth2O1i1DWVyplGFZNcproj8YYDweo9vrwx+NVbI5UNZ2acl2f0K63iB52WARLQvAmmWh2+1iMnnGbB4iXEQEmqDZbKoUi/O2bcPzWrAdpzicCga+j/3rB+JkjTntCVgl2WA7Ljb7V+SsKQHFu3ARY0RQnSeYyHJcV5+NIsexlbXIlTm3Xi8AHZ6ak3q2O8EnyEiY0jd/REBKk/nn6UxlLZMX7bphLwfIfJ1gcmgBSPRsd8Tu9EGGBVBwZihe1clizcO2xzeE7Ha8TNDrD9TvLN/jQNlZvsPQH30Cbgh4ePuD7YGbaG7ETYXkMlzOd+ixeCjN8lotZSWy0yzHMs2UgBxykbwhgxeeNg9jPM8CzZ10VmWxKaa70iCTO/NuRpVcVYZ1bCk3zbb0b4rJdK5dM03RnJ4bIRsN6L2AF7FhIIcjX2X1B0NS7+so71+vmGHy9SKYKsmP+CJMHh5+XRa6ZC2Zk80Xlj8A3jBs836OGROp4dD/XKCRKAItJUCV87UzgPeqFPBWSKClCVLSINno1htI2MGU2ZN7PA/Cc4fbNx5+YygfgOP7PwY5YgYDArqaPbfpIT/9RrLOtUEzAkq8nLMN9z5f6qFPqcJSwiyyLctWz+R+e56nXgqzOhmLDdd+3qv/wZhCg7oJuT8AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Untitled"
        title="Untitled"
        src="/static/a6db4db2a5edf34905c13b956a7b9ee9/c1b63/img_1.png"
        srcset="/static/a6db4db2a5edf34905c13b956a7b9ee9/5a46d/img_1.png 300w,
/static/a6db4db2a5edf34905c13b956a7b9ee9/0a47e/img_1.png 600w,
/static/a6db4db2a5edf34905c13b956a7b9ee9/c1b63/img_1.png 1200w,
/static/a6db4db2a5edf34905c13b956a7b9ee9/50e7d/img_1.png 1738w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p>실제로 객체의 연관관계를 나타낸 이미지와 DB 테이블의 다이어그램을 살펴보면 Group이 Member, Schedule, Participant와 연관관계를 맺고 있는 것을 확인할 수 있다.</p>
<h1 id="개선-전-쿼리-분석" style="position:relative;"><a href="#%EA%B0%9C%EC%84%A0-%EC%A0%84-%EC%BF%BC%EB%A6%AC-%EB%B6%84%EC%84%9D" aria-label="개선 전 쿼리 분석 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>개선 전 쿼리 분석</h1>
<p>서비스의 조회 쿼리를 개선하기 앞서 개선 전 조회 API별 쿼리를 먼저 분석해봤다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 482px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 129%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC2ElEQVRIx52ViXbaQAxF/f+/15CSEDaDMXjDQLDNFlVXRtRpFtrOOcIGZiS9pydNUBS5vL29iS/e3Vin00k2ZSmbTSlFUehzI5fL5cNetyDPc8myzDa/vr7aRg74obqqZL1eS1mq6ZMA6koPXz53iKMsSyXPM9ntdu8is3a7rQyHLxJFkYxGQ8nSVI7Ho3y1gq/+cIccnoWhhNOJTCcTGY9HNySfZkgGhcLebjdmfOfA+Xy2Q5VCbhHkAt+Hw+FKyflGTdeCNE0sgyRZSRwvZLVaGqyWKzEagDyfzWwfxfH//gmyr6ZpZDYLZT6fKeSxPD8/2Xscx5Y5CZE91a/rWoJGP8gCaBg/Yg4Zh6XKhkqnmnlV7WW/35szpwln0HQ4NBIsl7GMtXrxYtFG1mcUze1PFgeAvFhEEs3ndrCr2/+CTCCcheHUpJOsVi3Ma+YgIBB778qmriuTyuTK30TfpyqhpXKIs/W6MNtut61DPjDkAJ+8U353yHe489Yrr07gGPuz4gHRiA4s4CBenPuCcKBiT0996xh45lw4ndqzaWpLwHR4DzLOJ+OxwTaoWsRvi9JtG4fa7WWiI2oqj8ORVpwMV8ul+GCBAqT3ZVG6Dr0oVmF1BkyEjg5pU9OhVvnmsO3dnf1ApRC1Z+vjK9csGF90RVvVdoxBx7HDt0GGZOAAgywYAF0OCeRFeXkZXDMdyuNjTwaDZ+n3H00Bt2lzDzIdQydhQGWAEIRsUQA8gpDp86EoXUe/OaxNVp7lQhF9O2A/c/i+KG2V0SldQl8zxghCtgRg5CF6hsZdHSIbDgOX8WV8qyMq6t0CLRSI94C2SpLE7hQ2+p3hDiu7pAqTRzsUMhvGnOMdBZxOx1sSAZt9SLYDM33Xn3ZJaXWB2u//NDXYVaESs5tQrds5f9V6wIRHioJDdAindAnZ8sRM2PeKwpzrPfwwDfZ6DzYgBjrGyNKnvHNIM/wCPcbTBq594j4AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Untitled"
        title="Untitled"
        src="/static/69dc79c96485f21adea906e507fcf9b6/37e0d/img_2.png"
        srcset="/static/69dc79c96485f21adea906e507fcf9b6/5a46d/img_2.png 300w,
/static/69dc79c96485f21adea906e507fcf9b6/37e0d/img_2.png 482w"
        sizes="(max-width: 482px) 100vw, 482px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p>결과를 보면 알 수 있듯이 심각한 여러번 재귀적으로 발생하는 N+1문제는 아니지만 N+1문제가 존재하는 것과 불필요하게 많은 쿼리가 실행되는 것을 확인할 수 있었다. 지금부터 해당 쿼리를 어떠한 방식을 통해 개선하였는지 살펴보겠다.</p>
<h1 id="fetchjoin을-통한-단건-조회-쿼리-개선" style="position:relative;"><a href="#fetchjoin%EC%9D%84-%ED%86%B5%ED%95%9C-%EB%8B%A8%EA%B1%B4-%EC%A1%B0%ED%9A%8C-%EC%BF%BC%EB%A6%AC-%EA%B0%9C%EC%84%A0" aria-label="fetchjoin을 통한 단건 조회 쿼리 개선 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FetchJoin을 통한 단건 조회 쿼리 개선</h1>
<p>모임 단건 조회의 경우, 모임의 상세 조회를 한 것이기에 다음과 같이 많은 데이터를 조회 후 반환하여야 했다. 단건 조회 요청에 대한 반환 값은 아래와 같다.</p>
<pre class="grvsc-container one-dark-pro" data-language="json" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;name&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;모모의 스터디&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;host&quot;</span><span class="mtk1"> : {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;id&quot;</span><span class="mtk1"> : </span><span class="mtk7">6</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;name&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;모모&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;categoryId&quot;</span><span class="mtk1"> : </span><span class="mtk7">1</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;capacity&quot;</span><span class="mtk1"> : </span><span class="mtk7">10</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;duration&quot;</span><span class="mtk1"> : {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;start&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;2022-10-22&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;end&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;2022-10-22&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;schedules&quot;</span><span class="mtk1"> : [ {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;date&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;2022-10-22&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;startTime&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;10:00:00&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;endTime&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;12:00:00&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  } ],</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;finished&quot;</span><span class="mtk1"> : </span><span class="mtk7">false</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;deadline&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;2022-10-21T23:59&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;location&quot;</span><span class="mtk1"> : {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;address&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;서울 송파구 올림픽로 289&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;buildingName&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;시그마타워&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;detail&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;1층&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;like&quot;</span><span class="mtk1"> : </span><span class="mtk7">false</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;description&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<p>해당 데이터를 조회하기 위해서는 여러 테이블에 분산된 데이터를 조회하기 위해 아래와 같이 Group, Schedule, Member테이블을 각각 조회하여야 했다.</p>
<pre class="grvsc-container one-dark-pro" data-language="sql" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">deadline</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> deadline2_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">endDate</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> enddate3_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">startDate</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> startdat4_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">category</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> category5_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">closedEarly</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> closedea6_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">description</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> descript7_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationAddress</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> location8_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationBuildingName</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> location9_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationDetail</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> locatio10_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> name11_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">capacity</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> capacit12_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">host_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> host_id13_1_0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_group group0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">where</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk8">=</span><span class="mtk1">?</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">deleted</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> deleted2_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">password</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> password3_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">user_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> user_id4_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> name5_2_0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_member member0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">where</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk8">=</span><span class="mtk1">?</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value0_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> group_id5_4_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_4_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value0_</span><span class="mtk1">.</span><span class="mtk7">date</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> date2_4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value0_</span><span class="mtk1">.</span><span class="mtk7">endTime</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> endtime3_4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value0_</span><span class="mtk1">.</span><span class="mtk7">startTime</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> starttim4_4_1_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_schedule value0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">where</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value0_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk8">=</span><span class="mtk1">?</span></span></span></code></pre>
<p>해당 쿼리들은 엔티티들간의 연관관계 패치 타입을 <code>LAZY</code>가 아닌 <code>EAGER</code>로 설정하면 한 번의 쿼리로 조회를 할 수 있다. 하지만 패치 타입을 <code>EAGER</code>로 설정하게 된다면 우리가 예상하지 못한 쿼리들이 발생할 수 있기에 패치타입을 변경하는 방법이 아닌 fetch join을 하는 JPQL쿼리문을 작성하여 한 번의 쿼리로 모든 데이터를 조회하도록 하였다.</p>
<p>작성한 쿼리는 아래와 같다. schedule, host의 정보를 fetch join을 통해 한번에 가져오는 쿼리를 만들어 한 번의 쿼리로 모든 데이터를 갖고 오도록 하였다.</p>
<pre class="grvsc-container one-dark-pro" data-language="java" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk1">@</span><span class="mtk11">Query</span><span class="mtk4">(</span><span class="mtk6">&quot;SELECT g FROM Group g &quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">            </span><span class="mtk8">+</span><span class="mtk4"> </span><span class="mtk6">&quot;JOIN FETCH g.calendar.schedules.value &quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">            </span><span class="mtk8">+</span><span class="mtk4"> </span><span class="mtk6">&quot;JOIN FETCH g.participants.host &quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">            </span><span class="mtk8">+</span><span class="mtk4"> </span><span class="mtk6">&quot;WHERE g.id = :id&quot;</span><span class="mtk4">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk11">Optional</span><span class="mtk8">&lt;</span><span class="mtk4">Group</span><span class="mtk8">&gt;</span><span class="mtk4"> </span><span class="mtk3">findByIdWithHostAndSchedule</span><span class="mtk4">(</span><span class="mtk11">Long</span><span class="mtk4"> id)</span><span class="mtk1">;</span><span class="mtk4"> </span></span></span></code></pre>
<p>쿼리를 실행한 결과는 계획했던바와 같이 테이블별로 각각 조회하던 데이터를 join을 통해 한 번의 쿼리로 모든 데이터를 가져오도록 변경되었다.</p>
<pre class="grvsc-container one-dark-pro" data-language="sql" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value1_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member2_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_2_2_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">deadline</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> deadline2_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">endDate</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> enddate3_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">startDate</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> startdat4_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">category</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> category5_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">closedEarly</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> closedea6_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">description</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> descript7_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationAddress</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> location8_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationBuildingName</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> location9_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationDetail</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> locatio10_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> name11_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">capacity</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> capacit12_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">host_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> host_id13_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value1_</span><span class="mtk1">.</span><span class="mtk7">date</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> date2_4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value1_</span><span class="mtk1">.</span><span class="mtk7">endTime</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> endtime3_4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value1_</span><span class="mtk1">.</span><span class="mtk7">startTime</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> starttim4_4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value1_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> group_id5_4_0__,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">value1_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_4_0__,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member2_</span><span class="mtk1">.</span><span class="mtk7">deleted</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> deleted2_2_2_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member2_</span><span class="mtk1">.</span><span class="mtk7">password</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> password3_2_2_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member2_</span><span class="mtk1">.</span><span class="mtk7">user_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> user_id4_2_2_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member2_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> name5_2_2_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_group group0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">inner join</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_schedule value1_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk9">on</span><span class="mtk1"> </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk8">=</span><span class="mtk7">value1_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk1"> </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">inner join</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_member member2_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk9">on</span><span class="mtk1"> </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">host_id</span><span class="mtk8">=</span><span class="mtk7">member2_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">where</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk8">=</span><span class="mtk1">?</span></span></span></code></pre>
<h1 id="dto를-통한-모임-목록-조회" style="position:relative;"><a href="#dto%EB%A5%BC-%ED%86%B5%ED%95%9C-%EB%AA%A8%EC%9E%84-%EB%AA%A9%EB%A1%9D-%EC%A1%B0%ED%9A%8C" aria-label="dto를 통한 모임 목록 조회 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DTO를 통한 모임 목록 조회</h1>
<p>모임 상세 조회를 제외한 모임 관련 조회 API는 모두 모임 목록 조회 API이다. 모모팀 서비스의 메인 페이지를 비롯해 여러 모임 목록 조회 페이지를 보면 아래와 같이 모임의 이름, 호스트, 마감일까지 남은 기간, 참여자 수, 최대 인원의 정보만을 출력하고 있는 것을 확인할 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 861px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnUlEQVQoz31Su04CURDdX+MT9AdsiQmdjRY2NlbGisKEWkuMkQYCJoZKEk00KBQum10WZF1e+2SBPc4MuShEnWQyD2bPzLkHbTAYYDabrX25XCJNU3HOVc2Rbft3ZaqvBUGAJEkQhiGiKIKqOZ/P55LzIo6+70uM43ijx9+o5ZrneZhOpzBNE71eH7Ztg3uu60qu6zqYBc80m02JhmFgMplgPB6j3W7LTEpgvEAuDEO6ijbGcSSXKudL+EN1JQNwfzQaCQOu7Z5FgO8YUc61xvw/3SFMuw+L/GPgyFssFguhzM5gXP80nmEbB46A9qwuHGKiPb60sJs9xPFZASfnBezs5XBdKtMlPqxuF8PhcP0MCmjl36BiQShBe3h6xv7RKa5K97i4vEE2d4DibXmlnB+wfBtXbTtbFM/gRfFKZW60317RaDTQarVgdDorJUm9aOphSVSVgr85gyTJnOYDEUYAy5UKMpkMisUi6vW6DOqkpEt0f77Xv0ZiQV1Yq90hn8+jWq3CcRwBXNDfI/V8kBpI/6CrFoVE1wsjqb8AX6z1nqA47P8AAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Untitled"
        title="Untitled"
        src="/static/c6b97c820758295a8b5fe7a32a91b534/e35ec/img_3.png"
        srcset="/static/c6b97c820758295a8b5fe7a32a91b534/5a46d/img_3.png 300w,
/static/c6b97c820758295a8b5fe7a32a91b534/0a47e/img_3.png 600w,
/static/c6b97c820758295a8b5fe7a32a91b534/e35ec/img_3.png 861w"
        sizes="(max-width: 861px) 100vw, 861px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p>즉, 사용자에게 정보를 보여주기 위해서는 모임 상세와 다르게 모임의 모든 정보가 아닌 일부의 데이터만을 필요로 하고 있다. 기존의 로직에서는 일부 데이터만을 필요로 하는 목록 조회에서도 전체 모임 정보를 읽어와 Group객체를 만들었다. 이러한 구조는 메모리와 DB 측면에서 성능 저하를 일으키고 있었다.</p>
<h2 id="메모리-측면에서의-성능-저하" style="position:relative;"><a href="#%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%B8%A1%EB%A9%B4%EC%97%90%EC%84%9C%EC%9D%98-%EC%84%B1%EB%8A%A5-%EC%A0%80%ED%95%98" aria-label="메모리 측면에서의 성능 저하 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>메모리 측면에서의 성능 저하</h2>
<p>모모팀은 서비스를 개발하며 각각의 값들에 대한 안정성을 보장하기 위해 값 객체를 만들다보니 온전한 Group객체를 만들려면 수많은 객체들을 생성하여야 했다.</p>
<p>모모팀 서비스의 Group 도메인 구조를 살펴보면 아래와 같이 수 많은 객체들이 엮여있는 것을 확인할 수 있다.</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 41.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRklEQVQoz2VRW5KCMBDkOBIgQMIrUZSHAdzSqr3/ZXpnRnF3y48mydDpdM9ESZJAay3Isuy9Z+R5TjWN6+WIbflC2O4ojfng8ZnBWhF/0jRFQlBKYT+ntGZco7X3DdZwwzCMTy7VGMxnoTiOZeV/kSYXtqrkUJQlWufEGdfrpiUHOUxZ4DJM8MeTOGIxFrDWCsfa6lfwfPK4UZSm7eDaBvO8wHuP8dxjWx9w/oiTaxHChimsMCTCF8sixzwOmMn5dF3koafDVz/4BY7A9pWKobMUObnT2csRkdk575mzY+81g+9H6tWLvS/7kDrnKU5Djoy45GEU5IrrhvYSt67fA+qoVVVVP4eyI00THOjV3tW4P77RXyYSKUTQUJ8qU2AYr3J5oJbMUxBnxpRYlyD8f4L75CwNoescDauGkmgHqSuJe/hI9Bc/P2r8ibjYcpMAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Untitled"
        title="Untitled"
        src="/static/7cdbbb60507b4b9bde355b692316c125/c1b63/img_4.png"
        srcset="/static/7cdbbb60507b4b9bde355b692316c125/5a46d/img_4.png 300w,
/static/7cdbbb60507b4b9bde355b692316c125/0a47e/img_4.png 600w,
/static/7cdbbb60507b4b9bde355b692316c125/c1b63/img_4.png 1200w,
/static/7cdbbb60507b4b9bde355b692316c125/d61c2/img_4.png 1800w,
/static/7cdbbb60507b4b9bde355b692316c125/e8950/img_4.png 2000w"
        sizes="(max-width: 1200px) 100vw, 1200px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<p>해당 클래스들을 단순 조회를 하였을 때 항상 만들어지는 객체와 Proxy로 만들어지는 객체를 정리해보면 다음과 같다.</p>
<ul>
<li>항상 만들어지는 객체: Group, GroupName, Location, Description, Calender, Deadline, Duration, Participants, Capacity</li>
<li>지연로딩으로 만들어지는 Proxy객체: Schedule, Participant</li>
</ul>
<p>Group객체를 만들 때는 <code>9 + (N개의 Schedule Proxy객체) + (N개의 Participant객체)</code> 가 만들어지고 있었다. 우리 서비스의 타겟 인원(150명)이 동시에 모임 목록 조회 요청을 보냈을 때를 생각해보겠다. 모모 서비스는 목록 조회시 페이지네이션의 적용으로 인해 12개의 모임을 조회 및 반환하고 있다. 12개의 모임 조회를 150명이 동시에 요청을 한다면 요청을 처리하기 위해 만들어져야하는 도메인 레이어의 객체의 수는 <code>{9 + (N개의 Schedule Proxy객체) + (N개의 Participant객체)} * 12 * 150</code> 개가 된다. 이는 많은 메모리를 사용할 것이고 GC가 해야할 일이 너무 많아질 것이다.</p>
<blockquote>
<p>실제 요청을 처리하기 위해서는 Request, Response DTO, Participant의 실제 객체를 만드는 등의 추가적인 객체들이 만들어져야합니다.</p>
</blockquote>
<p>우리의 타겟 인원 150명만을 생각해도 셀 수도 없이 많은 객체들이 만들어지는데, 우리의 서비스가 배민과 같이 초당 요청이 수 십, 수 백만 건의 모임 목록 조회 요청을 받게 된다고 생각하면 진짜 상상할 수도 없을 정도의 객체들이 만들어질 것이다.</p>
<p>즉, 값 객체를 만들어 애플리케이션의 안정성은 높일 수 있었으나 메모리 측면의 성능에서는 확실히 많은 손해를 보고 있던 것이다.</p>
<h2 id="db-측면에서의-성능-저하" style="position:relative;"><a href="#db-%EC%B8%A1%EB%A9%B4%EC%97%90%EC%84%9C%EC%9D%98-%EC%84%B1%EB%8A%A5-%EC%A0%80%ED%95%98" aria-label="db 측면에서의 성능 저하 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DB 측면에서의 성능 저하</h2>
<h3 id="불필요한-데이터-요청" style="position:relative;"><a href="#%EB%B6%88%ED%95%84%EC%9A%94%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9A%94%EC%B2%AD" aria-label="불필요한 데이터 요청 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>불필요한 데이터 요청</h3>
<p>실제 사용되지 않는 모든 데이터를 조회하는 것은 DB와의 통신 측면에서도 좋지 않다. Spring 애플리케이션과 DB는 서로 다른 인스턴스에 위치해있고 둘 사이에서도 필요한 데이터를 가져오기 위해 요청과 응답 과정을 거치며 네트워크 통신을 하게 된다. 둘 사이에 통신을 할 때 불필요한 데이터들도 조회 및 전송을 한다면 해당 부분에서도 확실히 성능 저하가 발생할 것이다.</p>
<h3 id="보내지는-쿼리의-수" style="position:relative;"><a href="#%EB%B3%B4%EB%82%B4%EC%A7%80%EB%8A%94-%EC%BF%BC%EB%A6%AC%EC%9D%98-%EC%88%98" aria-label="보내지는 쿼리의 수 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>보내지는 쿼리의 수</h3>
<p>성능 개선 전 모임 목록 조회를 하였을 경우 DB에 <code>모임조회 쿼리1 + (호스트 조회 쿼리 1 + 각각 모임의 참여자 확인을 위한 쿼리 N) * 모임 수</code> 개의 쿼리가 날라갔다. 여기서 모임 참여자 확인을 위한 쿼리는 모임을 참여하는 인원 수를 비즈니스 로직에서 확인을 하다보니 Group이 갖고 있는 지연 로딩으로 인해 Proxy객체로 조회되었던 <code>List&#x3C;Participant></code>의 데이터를 하나씩 조회하는 과정에서 실행이 되었다.</p>
<pre class="grvsc-container one-dark-pro" data-language="sql" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk9">distinct</span><span class="mtk1"> </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">deadline</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> deadline2_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">endDate</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> enddate3_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">startDate</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> startdat4_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">category</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> category5_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">closedEarly</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> closedea6_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">description</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> descript7_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationAddress</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> location8_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationBuildingName</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> location9_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">locationDetail</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> locatio10_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> name11_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">capacity</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> capacit12_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">host_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> host_id13_1_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_group group0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">left outer join</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_participant participan1_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk9">on</span><span class="mtk1"> </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk8">=</span><span class="mtk7">participan1_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk1"> </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">order by</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">desc</span><span class="mtk1"> </span><span class="mtk9">limit</span><span class="mtk1"> ?</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">deleted</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> deleted2_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">password</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> password3_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">user_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> user_id4_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> name5_2_0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_member member0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">where</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk8">=</span><span class="mtk1">?</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">participan0_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> group_id2_3_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">participan0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_3_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">participan0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> id1_3_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">participan0_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> group_id2_3_1_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">participan0_</span><span class="mtk1">.</span><span class="mtk7">member_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> member_i3_3_1_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_participant participan0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">where</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">participan0_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk8">=</span><span class="mtk1">?</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">(참여자 수 N만큼 참여자 조회 쿼리가 날라간다.)</span></span></span></code></pre>
<p>즉, 하나의 모임 데이터를 조회하는 것만 생각하여도 Group테이블에 대한 조회뿐만 아니라 Member테이블에 1번, Participant 테이블에 N번 조회하여 셀 수 없이 많은 쿼리들이 실행되고 있었다. 이 또한 DB Connection을 그만큼 오래 잡고 많은 요청을 하기에 성능상의 저하를 유발시켰다.</p>
<h2 id="문제-해결" style="position:relative;"><a href="#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0" aria-label="문제 해결 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>문제 해결</h2>
<p>해당 문제들은 모임 목록 조회를 할 때, Repository레이어에서 DTO를 반환하도록 로직을 수정하며 해결하였다. 코드를 살펴보겠다. 기존의 모임 목록 조회 로직은 QueryDsl의 로직을 통해 처리되었었다</p>
<blockquote>
<p>QueryDsl을 통해 모임 목록을 조회한 이유는 모임 목록 조회시 카테고리별 조회, 마감된 모임 목록 조회, 키워드를 통한 조회 등의 여러 검색 조건을 걸 수 있어 동적 쿼리를 만들기 위해 사용하였다.</p>
</blockquote>
<pre class="grvsc-container one-dark-pro" data-language="java" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk11">Repository</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk9">public</span><span class="mtk4"> </span><span class="mtk9">class</span><span class="mtk4"> </span><span class="mtk11">GroupSearchRepositoryImpl</span><span class="mtk4"> </span><span class="mtk9">implements</span><span class="mtk4"> </span><span class="mtk11">GroupSearchRepositoryCustom</span><span class="mtk4"> </span><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">	</span><span class="mtk1">...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">	</span><span class="mtk9">private</span><span class="mtk3"> </span><span class="mtk11">Page</span><span class="mtk1">&lt;</span><span class="mtk11">Group</span><span class="mtk1">&gt;</span><span class="mtk3"> findGroups</span><span class="mtk1">(</span><span class="mtk11">SearchCondition</span><span class="mtk1"> </span><span class="mtk4 mtki">condition</span><span class="mtk1">, </span><span class="mtk11">Pageable</span><span class="mtk1"> </span><span class="mtk4 mtki">pageable</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                                   </span><span class="mtk11">Supplier</span><span class="mtk1">&lt;</span><span class="mtk11">BooleanExpression</span><span class="mtk1">&gt; </span><span class="mtk4 mtki">mainCondition</span><span class="mtk1">)</span><span class="mtk3"> </span><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk11">List</span><span class="mtk1">&lt;</span><span class="mtk11">Group</span><span class="mtk1">&gt; </span><span class="mtk4">groups</span><span class="mtk1"> </span><span class="mtk8">=</span><span class="mtk1"> queryFactory</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">select</span><span class="mtk1">(group).</span><span class="mtk3">distinct</span><span class="mtk1">()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">from</span><span class="mtk1">(group)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">leftJoin</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">participants</span><span class="mtk1">.</span><span class="mtk4">participants</span><span class="mtk1">, participant)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">where</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">mainCondition</span><span class="mtk1">.</span><span class="mtk3">get</span><span class="mtk1">(),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">conditionFilter</span><span class="mtk1">.</span><span class="mtk3">filterByCondition</span><span class="mtk1">(condition)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">orderBy</span><span class="mtk1">(</span><span class="mtk3">orderByDeadlineAsc</span><span class="mtk1">(</span><span class="mtk11">condition</span><span class="mtk1">.</span><span class="mtk3">orderByDeadline</span><span class="mtk1">()).</span><span class="mtk3">toArray</span><span class="mtk1">(</span><span class="mtk11">OrderSpecifier</span><span class="mtk1">[]</span><span class="mtk9">::new</span><span class="mtk1">))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">offset</span><span class="mtk1">(</span><span class="mtk11">pageable</span><span class="mtk1">.</span><span class="mtk3">getOffset</span><span class="mtk1">())</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">limit</span><span class="mtk1">(</span><span class="mtk11">pageable</span><span class="mtk1">.</span><span class="mtk3">getPageSize</span><span class="mtk1">())</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">fetch</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk11">JPAQuery</span><span class="mtk1">&lt;</span><span class="mtk11">Long</span><span class="mtk1">&gt; </span><span class="mtk4">countQuery</span><span class="mtk1"> </span><span class="mtk8">=</span><span class="mtk1"> queryFactory</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">select</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk3">countDistinct</span><span class="mtk1">())</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">from</span><span class="mtk1">(group)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">leftJoin</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">participants</span><span class="mtk1">.</span><span class="mtk4">participants</span><span class="mtk1">, participant)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">where</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">mainCondition</span><span class="mtk1">.</span><span class="mtk3">get</span><span class="mtk1">(),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">conditionFilter</span><span class="mtk1">.</span><span class="mtk3">filterByCondition</span><span class="mtk1">(condition)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                );</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk9">return</span><span class="mtk1"> </span><span class="mtk11">PageableExecutionUtils</span><span class="mtk1">.</span><span class="mtk3">getPage</span><span class="mtk1">(groups, pageable, countQuery</span><span class="mtk9">::</span><span class="mtk1">fetchOne);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span></code></pre>
<p>코드를 보면 요청에 대한 반환값이 Group인 것을 확인할 수 있다. 이제 Group전체 데이터가 아닌 필요한 데이터만을 조회하도록 코드를 변경해보겠다. 모임 목록 조회 API 호출시 반환값은 아래와 같다.</p>
<pre class="grvsc-container one-dark-pro" data-language="json" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;hasNextPage&quot;</span><span class="mtk1"> : </span><span class="mtk7">false</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;pageNumber&quot;</span><span class="mtk1"> : </span><span class="mtk7">0</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk4">&quot;groups&quot;</span><span class="mtk1"> : [ {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;id&quot;</span><span class="mtk1"> : </span><span class="mtk7">46</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;name&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;모모의 리엑트 스터디&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;host&quot;</span><span class="mtk1"> : {</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">&quot;id&quot;</span><span class="mtk1"> : </span><span class="mtk7">12</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk4">&quot;name&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;모모&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    },</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;categoryId&quot;</span><span class="mtk1"> : </span><span class="mtk7">1</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;capacity&quot;</span><span class="mtk1"> : </span><span class="mtk7">10</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;numOfParticipant&quot;</span><span class="mtk1"> : </span><span class="mtk7">1</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;finished&quot;</span><span class="mtk1"> : </span><span class="mtk7">false</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;deadline&quot;</span><span class="mtk1"> : </span><span class="mtk6">&quot;2022-10-21T23:59&quot;</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk4">&quot;like&quot;</span><span class="mtk1"> : </span><span class="mtk7">false</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  } ]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<p>여기서 필요한 데이터만을 추출하여 데이터를 담아올 <code>GroupSummaryRepositoryResponse</code> DTO를 먼저 만들어보겠다.</p>
<pre class="grvsc-container one-dark-pro" data-language="java" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk11">Getter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk11">AllArgsConstructor</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk9">public</span><span class="mtk4"> </span><span class="mtk9">class</span><span class="mtk4"> </span><span class="mtk11">GroupSummaryRepositoryResponse</span><span class="mtk4"> </span><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk11">Long</span><span class="mtk4"> groupId</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk11">String</span><span class="mtk4"> groupName</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk11">Long</span><span class="mtk4"> hostId</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk11">String</span><span class="mtk4"> hostName</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk11">Category</span><span class="mtk4"> category</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk9">int</span><span class="mtk4"> capacity</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk9">int</span><span class="mtk4"> numOfParticipant</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk9">boolean</span><span class="mtk4"> isClosedEarly</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk4"> </span><span class="mtk11">LocalDateTime</span><span class="mtk4"> deadline</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">}</span></span></span></code></pre>
<p>해당 DTO를 바로 반환하도록 로직을 수정해보겠다. DTO반환의 경우 QueryDsl의 select문에 DTO생성에 대한 코드를 작성해야하지만 코드의 가독성 향상을 위해 <code>makeProjections()</code> 메서드로 분리하였다.</p>
<pre class="grvsc-container one-dark-pro" data-language="java" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">@</span><span class="mtk11">Repository</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk9">public</span><span class="mtk4"> </span><span class="mtk9">class</span><span class="mtk4"> </span><span class="mtk11">GroupSearchRepositoryImpl</span><span class="mtk4"> </span><span class="mtk9">implements</span><span class="mtk4"> </span><span class="mtk11">GroupSearchRepositoryCustom</span><span class="mtk4"> </span><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">	</span><span class="mtk1">...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">	</span><span class="mtk9">private</span><span class="mtk3"> </span><span class="mtk11">Page</span><span class="mtk1">&lt;</span><span class="mtk11">GroupSummaryRepositoryResponse</span><span class="mtk1">&gt;</span><span class="mtk3"> findGroups</span><span class="mtk1">(</span><span class="mtk11">SearchCondition</span><span class="mtk1"> </span><span class="mtk4 mtki">condition</span><span class="mtk1">, </span><span class="mtk11">Pageable</span><span class="mtk1"> </span><span class="mtk4 mtki">pageable</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                                                            </span><span class="mtk11">Supplier</span><span class="mtk1">&lt;</span><span class="mtk11">BooleanExpression</span><span class="mtk1">&gt; </span><span class="mtk4 mtki">mainCondition</span><span class="mtk1">)</span><span class="mtk3"> </span><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk11">List</span><span class="mtk1">&lt;</span><span class="mtk11">GroupSummaryRepositoryResponse</span><span class="mtk1">&gt; </span><span class="mtk4">groups</span><span class="mtk1"> </span><span class="mtk8">=</span><span class="mtk1"> queryFactory</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">select</span><span class="mtk1">(</span><span class="mtk3">makeProjections</span><span class="mtk1">())</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">from</span><span class="mtk1">(group)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">innerJoin</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">participants</span><span class="mtk1">.</span><span class="mtk4">host</span><span class="mtk1">, member)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">leftJoin</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">participants</span><span class="mtk1">.</span><span class="mtk4">participants</span><span class="mtk1">, participant)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">where</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">mainCondition</span><span class="mtk1">.</span><span class="mtk3">get</span><span class="mtk1">(),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">conditionFilter</span><span class="mtk1">.</span><span class="mtk3">filterByCondition</span><span class="mtk1">(condition)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">groupBy</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk4">id</span><span class="mtk1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">orderBy</span><span class="mtk1">(</span><span class="mtk3">orderByDeadlineAsc</span><span class="mtk1">(</span><span class="mtk11">condition</span><span class="mtk1">.</span><span class="mtk3">orderByDeadline</span><span class="mtk1">()).</span><span class="mtk3">toArray</span><span class="mtk1">(</span><span class="mtk11">OrderSpecifier</span><span class="mtk1">[]</span><span class="mtk9">::new</span><span class="mtk1">))</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">offset</span><span class="mtk1">(</span><span class="mtk11">pageable</span><span class="mtk1">.</span><span class="mtk3">getOffset</span><span class="mtk1">())</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">limit</span><span class="mtk1">(</span><span class="mtk11">pageable</span><span class="mtk1">.</span><span class="mtk3">getPageSize</span><span class="mtk1">())</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">fetch</span><span class="mtk1">();</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk11">JPAQuery</span><span class="mtk1">&lt;</span><span class="mtk11">Long</span><span class="mtk1">&gt; </span><span class="mtk4">countQuery</span><span class="mtk1"> </span><span class="mtk8">=</span><span class="mtk1"> queryFactory</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">select</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk3">countDistinct</span><span class="mtk1">())</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">from</span><span class="mtk1">(group)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">leftJoin</span><span class="mtk1">(</span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">participants</span><span class="mtk1">.</span><span class="mtk4">participants</span><span class="mtk1">, participant)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                .</span><span class="mtk3">where</span><span class="mtk1">(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">mainCondition</span><span class="mtk1">.</span><span class="mtk3">get</span><span class="mtk1">(),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                        </span><span class="mtk11">conditionFilter</span><span class="mtk1">.</span><span class="mtk3">filterByCondition</span><span class="mtk1">(condition)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                );</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk9">return</span><span class="mtk1"> </span><span class="mtk11">PageableExecutionUtils</span><span class="mtk1">.</span><span class="mtk3">getPage</span><span class="mtk1">(groups, pageable, countQuery</span><span class="mtk9">::</span><span class="mtk1">fetchOne);</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">    </span><span class="mtk9">private</span><span class="mtk3"> </span><span class="mtk9">static</span><span class="mtk3"> </span><span class="mtk11">ConstructorExpression</span><span class="mtk1">&lt;</span><span class="mtk11">GroupSummaryRepositoryResponse</span><span class="mtk1">&gt;</span><span class="mtk3"> makeProjections</span><span class="mtk1">()</span><span class="mtk3"> </span><span class="mtk1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk9">int</span><span class="mtk1"> </span><span class="mtk4">host</span><span class="mtk1"> </span><span class="mtk8">=</span><span class="mtk1"> </span><span class="mtk7">1</span><span class="mtk1">;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk9">return</span><span class="mtk1"> </span><span class="mtk11">Projections</span><span class="mtk1">.</span><span class="mtk3">constructor</span><span class="mtk1">(</span><span class="mtk11">GroupSummaryRepositoryResponse</span><span class="mtk1">.</span><span class="mtk4">class</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk4">id</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">name</span><span class="mtk1">.</span><span class="mtk4">value</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">participants</span><span class="mtk1">.</span><span class="mtk11">host</span><span class="mtk1">.</span><span class="mtk4">id</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">member</span><span class="mtk1">.</span><span class="mtk11">userName</span><span class="mtk1">.</span><span class="mtk4">value</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk4">category</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">participants</span><span class="mtk1">.</span><span class="mtk11">capacity</span><span class="mtk1">.</span><span class="mtk4">value</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">participant</span><span class="mtk1">.</span><span class="mtk3">count</span><span class="mtk1">().</span><span class="mtk3">intValue</span><span class="mtk1">().</span><span class="mtk3">add</span><span class="mtk1">(host),</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk4">closedEarly</span><span class="mtk1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">                </span><span class="mtk11">group</span><span class="mtk1">.</span><span class="mtk11">calendar</span><span class="mtk1">.</span><span class="mtk11">deadline</span><span class="mtk1">.</span><span class="mtk4">value</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        );</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    }</span></span></span></code></pre>
<p>변경된 코드는 이게 전부이다.</p>
<p>이제 실제 요청을 보내 변경된 쿼리를 살펴보겠다. 앞서 개선전 요청을 처리하기 위해서는 <code>모임조회 쿼리1 + (호스트 조회 쿼리 1 + 각각 모임의 참여자 확인을 위한 쿼리 N) * 모임 수</code> 개의 쿼리가 실행되었다. 하지만 개선 후의 쿼리 실행 결과를 보면 아래의 쿼리 한개만 실행된다.</p>
<pre class="grvsc-container one-dark-pro" data-language="sql" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">Hibernate: </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">select</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_0_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_1_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">host_id</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_2_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">member1_</span><span class="mtk1">.</span><span class="mtk7">name</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_3_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">category</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_4_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">capacity</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_5_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk9">cast</span><span class="mtk1">(</span><span class="mtk8">count</span><span class="mtk1">(</span><span class="mtk7">participan2_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1">) </span><span class="mtk9">as</span><span class="mtk1"> </span><span class="mtk9">integer</span><span class="mtk1">)+? </span><span class="mtk9">as</span><span class="mtk1"> col_6_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">closedEarly</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_7_0_,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">deadline</span><span class="mtk1"> </span><span class="mtk9">as</span><span class="mtk1"> col_8_0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">from</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_group group0_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">inner join</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_member member1_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk9">on</span><span class="mtk1"> </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">host_id</span><span class="mtk8">=</span><span class="mtk7">member1_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">left outer join</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        momo_participant participan2_ </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">            </span><span class="mtk9">on</span><span class="mtk1"> </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk8">=</span><span class="mtk7">participan2_</span><span class="mtk1">.</span><span class="mtk7">group_id</span><span class="mtk1"> </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">group by</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk9">order by</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">group0_</span><span class="mtk1">.</span><span class="mtk7">id</span><span class="mtk1"> </span><span class="mtk9">desc</span><span class="mtk1"> </span><span class="mtk9">limit</span><span class="mtk1"> ?</span></span></span></code></pre>
<blockquote>
<p>참여한 목록, 찜한 목록, 주최한 목록 조회의 경우 기본 모임 목록 조회와 사용하는 베이스 메서드가 같아서 포스트에 따로 남기지는 않겠다.</p>
</blockquote>
<h1 id="개선-전후-실행되는-쿼리-수-비교" style="position:relative;"><a href="#%EA%B0%9C%EC%84%A0-%EC%A0%84%ED%9B%84-%EC%8B%A4%ED%96%89%EB%90%98%EB%8A%94-%EC%BF%BC%EB%A6%AC-%EC%88%98-%EB%B9%84%EA%B5%90" aria-label="개선 전후 실행되는 쿼리 수 비교 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>개선 전/후 실행되는 쿼리 수 비교</h1>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 732px; "
    >
      <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 85%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACGElEQVQ4y3WUC3OiQBCE+f+/L8bTi4IaBUR5yEvwMbffkOEklWzVFNSyM9M93YuXZZlUVSW3202ez6dG13WS55lcikLu9/u4T7C67iplWUrbNpM8wqvrSi6Xiyba4nDg+7JeryRNU917Ldj3vXt/jOcnBenSNI3Uda1PNq/XVsIwlCRJdO/7AtWA/CGPx2NaEHRFkTuUhVJnVQ7hbrfVyLLUNbjqGEBGAX2+MHpdHvMggUN932mXtm3leIwlikJJz2ctykwLN1MQW1HOEY1jB1NQe4iSpi4pJSnXLsz1sN9L5GjzTgELZeCY+P5aI0mOmkcwCu8n2Mxzv/+UzSaQ7XajDYekTBEODI5ydugZ2YSy0TmfT0qdRRJ0w/AgcRwpZeiCwFSGZlle1BH/EfaDbUBUVeWYYJQ+/i61GN8JsxYizuczWSz+aOPanW+a4fuvlDdBIKvVhxamKCaHiRWGNoKi/oQy3UxBQwBlqNLdKGMrKI2Um1rpwowaNhKPTQbL01TkcBD4ig6l8ePnbjcKQBFuEd8RzzzL/oSyXS08hSBYh0N2C6whc0f9w2Ev2M7ylPLPM6zUMqAgTqdEEweBBl8yHsKEHAsyvzwbbNN92QaE3JQ4jnXfrqUhRAhGxNxgMDG2WYID1o335XIh77M3nRHiMEsKIAgizNy3+fxdaQ+2aX63DQaPokgRUgyRQMW+/WnsZ/HdNv8ANmEhHZvt+fUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="Untitled"
        title="Untitled"
        src="/static/c8b270b70ec317afc6e5f4d73d2aedd9/d0cc0/img_5.png"
        srcset="/static/c8b270b70ec317afc6e5f4d73d2aedd9/5a46d/img_5.png 300w,
/static/c8b270b70ec317afc6e5f4d73d2aedd9/0a47e/img_5.png 600w,
/static/c8b270b70ec317afc6e5f4d73d2aedd9/d0cc0/img_5.png 732w"
        sizes="(max-width: 732px) 100vw, 732px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
    </span></p>
<h1 id="마치며" style="position:relative;"><a href="#%EB%A7%88%EC%B9%98%EB%A9%B0" aria-label="마치며 permalink" class="toc-header before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>마치며</h1>
<p>이번 포스트에서는 모모팀 서비스의 조회로직 관련 쿼리 개선기에 대해 다뤄봤다. JPA공부를 시작하고 영한님의 인프런 강의를 수강하며 성능 개선에 대한 이야기를 들을 때마다 모모팀의 서비스도 전반적으로 둘러보며 성능 개선을 해야겠다는 생각을 줄곧 해왔지만 서비스 개발하는데 급급하여 성능 개선은 미뤄오기만 했었다. 미뤄왔던 조회 성능 개선을 진행하며 우리 서비스의 성능상의 많은 문제점들을 발견하고 개선해보는 시간을 가져봤다.</p>
<p>개선을 진행하며 확실히 애플리케이션 개발 중간중간 이와 같이 쿼리를 확인하는 시간을 가져봐야한다는 필요성을 느끼었고 JPA의 동작과정에 대해 다시 한번 학습해보는 좋은 시간을 가지며 한 단계 더 성장한 것 같다 뿌듯함을 느끼었다.</p>
<p>지금까지 조회 관련 성능 개선을 완료하였으니 이제 내일부터는 CUD관련 쿼리를 분석 및 개선해보는 시간을 가져보려한다.</p>
<blockquote>
<p>코드 변경에 대한 자세한 내용은 아래의 PR과 모모 레포지토리를 통해 확인하실 수 있습니다.
코드 변경에 대한 자세한 내용은 아래의 PR과 모모 레포지토리를 통해 확인하실 수 있습니다.</p>
<ul>
<li><a href="https://github.com/woowacourse-teams/2022-momo">woowacourse-teams/2022-momo</a></li>
<li><a href="https://github.com/woowacourse-teams/2022-momo/pull/441">woowacourse-teams/2022-momo/pull/441</a></li>
</ul>
</blockquote>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .one-dark-pro {
    background-color: #282c34;
    color: #abb2bf;
  }
  .one-dark-pro .mtki { font-style: italic; }
  .one-dark-pro .mtk1 { color: #ABB2BF; }
  .one-dark-pro .mtk4 { color: #E06C75; }
  .one-dark-pro .mtk6 { color: #98C379; }
  .one-dark-pro .mtk7 { color: #D19A66; }
  .one-dark-pro .mtk9 { color: #C678DD; }
  .one-dark-pro .mtk8 { color: #56B6C2; }
  .one-dark-pro .mtk11 { color: #E5C07B; }
  .one-dark-pro .mtk3 { color: #61AFEF; }
  .one-dark-pro .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div></div></div></div><div class="css-1bdwg0l e6qprj20"><div><style data-emotion-css="17t5ffy">.css-17t5ffy{margin-top:1rem;margin-bottom:1rem;}</style><div class="css-17t5ffy"><div class="css-1l4w6pd"><div class="css-164tafw"></div></div></div><style data-emotion-css="i1cgbm">.css-i1cgbm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;margin-top:1rem;padding-left:0.5rem;padding-right:0.5rem;}</style><div class="css-i1cgbm"><style data-emotion-css="16k19ub">.css-16k19ub{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.25rem;padding-bottom:0.25rem;margin-top:0.5rem;margin-bottom:0.5rem;margin-left:0.5rem;border-radius:0.25rem;--text-opacity:1;color:rgba(255,255,255,var(--text-opacity));background-color:#2D87FD;}</style><button class="css-16k19ub"><style data-emotion-css="u7tj59">.css-u7tj59{fill:currentColor;margin-top:auto;margin-bottom:auto;margin-right:0.25rem;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 320 512" class="css-u7tj59" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg>Share with <!-- -->Facebook</button><style data-emotion-css="9nr5sz">.css-9nr5sz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.25rem;padding-bottom:0.25rem;margin-top:0.5rem;margin-bottom:0.5rem;margin-left:0.5rem;border-radius:0.25rem;--text-opacity:1;color:rgba(255,255,255,var(--text-opacity));background-color:#1CA1F2;}</style><button class="css-9nr5sz"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-u7tj59" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>Share with <!-- -->Twitter</button><style data-emotion-css="rk0yc0">.css-rk0yc0{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.25rem;padding-bottom:0.25rem;margin-top:0.5rem;margin-bottom:0.5rem;margin-left:0.5rem;border-radius:0.25rem;--text-opacity:1;color:rgba(255,255,255,var(--text-opacity));background-color:#6E7783;}</style><button class="css-rk0yc0"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" class="css-u7tj59" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg>Share with <!-- -->Url</button></div></div></div></div></div><div class="css-1bdwg0l e6qprj20"><style data-emotion-css="17t1oy1">.css-17t1oy1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap-reverse;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse;margin-left:0.5rem;margin-right:0.5rem;margin-top:1rem;}@media (min-width:768px){.css-17t1oy1{-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}}</style><div class="css-17t1oy1 e1ic15ss0"><style data-emotion-css="1pwr1ry">.css-1pwr1ry{width:100%;margin:0.5rem;}@media (min-width:768px){.css-1pwr1ry{width:50%;margin:1rem;}}</style><div class="css-1pwr1ry e1ic15ss1"><style data-emotion-css="txyanx">.css-txyanx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);text-align:left;width:100%;height:100%;padding:0.5rem;background-color:#eee;border-radius:0.25rem;border-left-width:4px;border-color:#A5CC82;}.css-txyanx:hover{background-color:#ddd;}</style><a rel="prev" class="css-txyanx" href="/Backend/20221009-모모팀-서비스성능-개선기1/"><style data-emotion-css="19o7xeo">.css-19o7xeo{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;margin-right:1rem;margin-left:0.5rem;height:100%;}</style><div class="css-19o7xeo"><style data-emotion-css="11za1ik">.css-11za1ik{width:2rem;height:2rem;margin-top:auto;margin-bottom:auto;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="css-11za1ik" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 0 0 0 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></div><style data-emotion-css="v38or">.css-v38or{display:inline-block;margin-top:0.5rem;margin-bottom:0.5rem;}</style><div class="css-v38or"><style data-emotion-css="1e3im4j">.css-1e3im4j{color:#00467F;}</style><p class="css-1e3im4j">이전 포스트</p><p>모모팀 서비스 성능 개선기1 (의존관계 개선)</p></div></a></div><div class="css-1pwr1ry e1ic15ss1"><style data-emotion-css="89mi30">.css-89mi30{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);text-align:right;width:100%;height:100%;padding:0.5rem;background-color:#eee;border-radius:0.25rem;border-right-width:4px;border-color:#A5CC82;}.css-89mi30:hover{background-color:#ddd;}</style><a rel="next" class="css-89mi30" href="/Backend/20221017-모모팀-서비스성능-개선기3/"><div class="css-v38or"><p class="css-1e3im4j">다음 포스트</p><p>모모팀 서비스 성능 개선기3 (CUD 쿼리 개선)</p></div><div class="css-19o7xeo"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="css-11za1ik" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 0 0 0-48.4z"></path></svg></div></a></div></div><style data-emotion-css="14yohw7">.css-14yohw7{width:100%;max-width:768px;padding-left:1rem;padding-right:1rem;margin-left:auto;margin-right:auto;padding-top:2rem;margin-top:0.5rem;margin-bottom:1rem;}@media (min-width:768px){.css-14yohw7{padding-left:0;padding-right:0;padding-top:3rem;}}</style><div class="css-14yohw7 e1q36c7t0"><style data-emotion-css="180ky7f">.css-180ky7f{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:0.5rem;padding-right:0.5rem;}@media (min-width:768px){.css-180ky7f{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="css-180ky7f e1q36c7t1"><style data-emotion-css="p5b1u1">.css-p5b1u1{border-radius:9999px;border-width:1px;--border-opacity:1;border-color:rgba(214,188,250,var(--border-opacity));margin-right:2rem;margin-bottom:0.5rem;}@media (min-width:768px){.css-p5b1u1{margin-bottom:1rem;}}</style><div class="css-p5b1u1 gatsby-image-wrapper" style="position:relative;overflow:hidden;display:inline-block;width:128px;height:128px"><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADDklEQVQ4y31UXUhTYRg+F0VFSRmBms413dSyMvuhaGU5LCEQzUCcWxJpGeE/hNnwN+1nCKUyp3gRImFIXmRd5KYXYZLQSvBa8EaSpqRo29ymezrvmd/Z5pYvfOc7H+c9z/e8z/vDra+vg5bbTcu9+e7G2toatrONjQ04nU7Rn/3LhQJzuVzCT4uLi+joeA2NJh/XrquQkXEVmZkZaGlpFsDInM61AFCOHWgnINrJenq6ERF5CKfPpKCiohRNzQ2oq9fhfkkxko4qkJAYj8nJb5ugPqacPzMGVlx8F+HhYRgcfPffkGuf1GD3nh2YmPgaAMoxqiyEoqI7kEpjYLX+Fh1JT7YcDocoSeuzp5DFxQphezweX8gsAe3trxB+MAzz87+Es91uD9DWXxoGejIlGS2tzcI74XDsw8zMDPYf2IvRUbNwdjjsW4C8i4EyEn19b5B8PInPuscbMvtQ8uAesrJubII54Csnrxx0sb/4jMjc3BxiYiIxPT0tnDl6LC39gSQ2CibTZ1E3BkLa+BsDZszJLirPw2Do8AEODLzFseTEAFbMrFYrjEYDTOYRGLo6g4DJtLfVqKqu8AFWVZVDXZAnsiNWlCAKZ3l5CTWPH2F4+AO6e4xYXV3B2NiomASywkINSsse+gAL+E4o54uXZZYs91YOzp5LDao/5aULyM7JCvDVaPNR5g9IB61WLSaE7Upem8QkOerqdKiurkSsNBqX05Q862UhChYytWVbm94HODT0HvFyqdDw/iXhcjnxUv8cN3Ozka/OE9qRfFi45EugMpkEZrPJC0gOJLAiIQ6NjfWijqwOtxr5soIn0+tfQK6QCZcTFsdoU6Pv3bcLTU0NAQA2uw02G62/QSNNp6vl+3knX24jIpGA1rP8sEAiiRLq6uOnYSwsWIMYTk39FCKRK44IpWaxfA8eDv6gKysrqOTLiJqeFmU1PT0N6ao0nEo9gcPREVCprqC3t0eUhOkpji8GysJnN46Pf+GLugvG7i6+EzrR39+H2dnZbac2F2qS0I0sm6GMjbRQk+gfC+9ZnRl0IjIAAAAASUVORK5CYII=" alt="profileImg" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/1134414851454382d55f3e82eb460d40/2c344/profile.png 1x,
/static/1134414851454382d55f3e82eb460d40/f20a7/profile.png 1.5x" /><img loading="lazy" width="128" height="128" srcset="/static/1134414851454382d55f3e82eb460d40/2c344/profile.png 1x,
/static/1134414851454382d55f3e82eb460d40/f20a7/profile.png 1.5x" src="/static/1134414851454382d55f3e82eb460d40/2c344/profile.png" alt="profileImg" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div><span>Written by </span><style data-emotion-css="16q43sj">.css-16q43sj{display:inline-block;font-size:1.25rem;font-weight:700;border-radius:9999px;margin-bottom:0.5rem;padding-left:0.75rem;padding-right:0.75rem;--bg-opacity:1;background-color:rgba(237,242,247,var(--bg-opacity));color:#00467F;}</style><p class="css-16q43sj">@<!-- -->momo</p><style data-emotion-css="vg2p6i">.css-vg2p6i{font-size:0.875rem;font-weight:400;margin-bottom:0.5rem;}</style><div class="css-vg2p6i">모모팀의 기술 블로그입니다</div></div></div><style data-emotion-css="1air669">.css-1air669{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-left:0.5rem;margin-right:0.5rem;}</style><div class="css-1air669"><div class="css-164tafw"></div></div></div><style data-emotion-css="18jj1tc">.css-18jj1tc{margin-top:1.25rem;margin-left:0.5rem;margin-right:0.5rem;}</style><div class="css-18jj1tc"><div class="utterances"></div></div></div></div><style data-emotion-css="xgi74q">.css-xgi74q{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;position:fixed;bottom:0;right:0;padding-right:1.5rem;padding-bottom:1.5rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><div class="css-xgi74q e1m8uc5d0"><style data-emotion-css="1a68u">.css-1a68u{box-shadow:0 2px 2px 0 rgba(0,0,0,0.15);-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);background-color:#FFFFFF;color:#636363;font-size:0.75rem;padding-left:0.5rem;padding-right:0.5rem;padding-top:0.5rem;padding-bottom:0.5rem;border-radius:9999px;--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;-webkit-transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));-ms-transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-content:flex-end;-ms-flex-line-pack:end;align-content:flex-end;z-index:100;}.css-1a68u:hover{background-color:#404040;color:#FFFFFF;}.css-1a68u:hover{--transform-scale-x:1.05;--transform-scale-y:1.05;}</style><button title="change to darkmode" class="css-1a68u"><style data-emotion-css="1alqh2e">.css-1alqh2e{fill:currentColor;--text-opacity:1;color:rgba(246,224,94,var(--text-opacity));width:1rem;height:1rem;margin-top:auto;margin-bottom:auto;margin-left:0;margin-right:0;}@media (min-width:768px){.css-1alqh2e{display:inline-block;margin-left:0.25rem;margin-right:0.25rem;}}</style><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" class="css-1alqh2e" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg><style data-emotion-css="flxr9x">.css-flxr9x{display:none;margin-right:0;}@media (min-width:768px){.css-flxr9x{display:inline-block;margin-right:0.25rem;}}</style><span class="css-flxr9x">다크 모드로 보기</span></button><style data-emotion-css="15afv4q">.css-15afv4q{box-shadow:0 2px 2px 0 rgba(0,0,0,0.15);-webkit-transition:all 300ms cubic-bezier(0.4,0,0.2,1);transition:all 300ms cubic-bezier(0.4,0,0.2,1);background-color:#FFFFFF;color:#636363;font-size:0.75rem;padding-left:0.5rem;padding-right:0.5rem;padding-top:0.5rem;padding-bottom:0.5rem;border-radius:9999px;--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;-webkit-transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));-ms-transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));cursor:pointer;margin-left:0.5rem;margin-top:auto;margin-bottom:auto;z-index:100;}.css-15afv4q:hover{background-color:#404040;color:#FFFFFF;}.css-15afv4q:hover{--transform-scale-x:1.05;--transform-scale-y:1.05;}</style><button title="top page" class="css-15afv4q"><style data-emotion-css="13htjwu">.css-13htjwu{width:1rem;height:1rem;}</style><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="css-13htjwu" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M868 545.5L536.1 163a31.96 31.96 0 0 0-48.3 0L156 545.5a7.97 7.97 0 0 0 6 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"></path></svg></button></div><style data-emotion-css="1k8xcyw">.css-1k8xcyw{text-align:center;padding-top:2rem;padding-bottom:2rem;bottom:0;}</style><footer class="css-1k8xcyw"><style data-emotion-css="1xju3od">.css-1xju3od{font-size:0.75rem;font-weight:700;}</style><a href="https://github.com/Seongwon97" class="css-1xju3od">©Momo</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'G-Y3VQCJ7ZEX', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/Backend/20221014-모모팀-서비스성능-개선기2/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2f72579fb641bf14a0fa.js"],"app":["/app-d1a6932a45bfd024ad29.js"],"component---src-pages-404-js":["/component---src-pages-404-js-0a6852889ec28cc0cb78.js"],"component---src-pages-index-js":["/component---src-pages-index-js-df04c8a92b3d2d8d3fc9.js"],"component---src-pages-search-js":["/component---src-pages-search-js-9304c0011dcd53f925c6.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-4910a6c560d7a355cf37.js"],"component---src-templates-category-js":["/component---src-templates-category-js-00675ddb0659eb6056e0.js"]};/*]]>*/</script><script src="/polyfill-2f72579fb641bf14a0fa.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-4910a6c560d7a355cf37.js" async=""></script><script src="/7a297f752dcfe258c0b0106d89edb3a916af916e-ba3bed115b500439fc94.js" async=""></script><script src="/commons-b839ac3ef2817b5d267d.js" async=""></script><script src="/1bfc9850-409296e666dade882413.js" async=""></script><script src="/5e2a4920-da90abce4a08c86a094c.js" async=""></script><script src="/d7eeaac4-dcbe97e7a5aa158c9d08.js" async=""></script><script src="/app-d1a6932a45bfd024ad29.js" async=""></script><script src="/dc6a8720040df98778fe970bf6c000a41750d3ae-17eb047fb821ccbad0b0.js" async=""></script><script src="/styles-84a9bc99193fe5828ffe.js" async=""></script><script src="/framework-eb684e3e828ad13b3940.js" async=""></script><script src="/webpack-runtime-91d2ca5880d6e7d8e505.js" async=""></script></body></html>